<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{&quot;hostname&quot;:&quot;erbi.me&quot;,&quot;root&quot;:&quot;&#x2F;&quot;,&quot;images&quot;:&quot;&#x2F;images&quot;,&quot;scheme&quot;:&quot;Gemini&quot;,&quot;version&quot;:&quot;8.5.0&quot;,&quot;exturl&quot;:false,&quot;sidebar&quot;:{&quot;position&quot;:&quot;left&quot;,&quot;display&quot;:&quot;always&quot;,&quot;padding&quot;:18,&quot;offset&quot;:12},&quot;copycode&quot;:false,&quot;bookmark&quot;:{&quot;enable&quot;:false,&quot;color&quot;:&quot;#222&quot;,&quot;save&quot;:&quot;auto&quot;},&quot;fancybox&quot;:false,&quot;mediumzoom&quot;:false,&quot;lazyload&quot;:false,&quot;pangu&quot;:false,&quot;comments&quot;:{&quot;style&quot;:&quot;tabs&quot;,&quot;active&quot;:null,&quot;storage&quot;:true,&quot;lazyload&quot;:false,&quot;nav&quot;:null},&quot;motion&quot;:{&quot;enable&quot;:true,&quot;async&quot;:false,&quot;transition&quot;:{&quot;post_block&quot;:&quot;fadeIn&quot;,&quot;post_header&quot;:&quot;fadeInDown&quot;,&quot;post_body&quot;:&quot;fadeInDown&quot;,&quot;coll_header&quot;:&quot;fadeInLeft&quot;,&quot;sidebar&quot;:&quot;fadeInUp&quot;}},&quot;prism&quot;:false,&quot;i18n&quot;:{&quot;placeholder&quot;:&quot;搜索...&quot;,&quot;empty&quot;:&quot;没有找到任何搜索结果：${query}&quot;,&quot;hits_time&quot;:&quot;找到 ${hits} 个搜索结果（用时 ${time} 毫秒）&quot;,&quot;hits&quot;:&quot;找到 ${hits} 个搜索结果&quot;},&quot;path&quot;:&quot;&#x2F;search.xml&quot;,&quot;localsearch&quot;:{&quot;enable&quot;:true,&quot;trigger&quot;:&quot;auto&quot;,&quot;top_n_per_article&quot;:1,&quot;unescape&quot;:false,&quot;preload&quot;:false}}</script><script src="/js/config.js"></script>
<meta name="description" content="Redis Cluster介绍概念Redis 集群是一个提供在多个Redis间节点间共享数据的程序集。 Redis集群并不支持处理多个keys的命令,因为这需要在不同的节点间移动数据,从而达不到像Redis那样的性能,在高负载的情况下可能会导致不可预料的错误. Redis 集群通过分区来提供一定程度的可用性,在实际环境中当某个节点宕机或者不可达的情况下继续处理命令. Redis 集群的优势:">
<meta property="og:type" content="article">
<meta property="og:title" content="Redis Cluster集群搭建">
<meta property="og:url" content="http://erbi.me/1688/index.html">
<meta property="og:site_name" content="记忆角落">
<meta property="og:description" content="Redis Cluster介绍概念Redis 集群是一个提供在多个Redis间节点间共享数据的程序集。 Redis集群并不支持处理多个keys的命令,因为这需要在不同的节点间移动数据,从而达不到像Redis那样的性能,在高负载的情况下可能会导致不可预料的错误. Redis 集群通过分区来提供一定程度的可用性,在实际环境中当某个节点宕机或者不可达的情况下继续处理命令. Redis 集群的优势:">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://qn.199604.com/typoraImg/20200411235453287.png">
<meta property="og:image" content="http://qn.199604.com/typoraImg/image-20210319173020188.png">
<meta property="article:published_time" content="2021-03-19T10:11:19.000Z">
<meta property="article:modified_time" content="2021-06-10T01:36:15.137Z">
<meta property="article:author" content="郭良俊只狗">
<meta property="article:tag" content="redis">
<meta property="article:tag" content="Redis Cluster">
<meta property="article:tag" content="集群">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://qn.199604.com/typoraImg/20200411235453287.png">


<link rel="canonical" href="http://erbi.me/1688/">



<script class="next-config" data-name="page" type="application/json">{&quot;sidebar&quot;:&quot;&quot;,&quot;isHome&quot;:false,&quot;isPost&quot;:true,&quot;lang&quot;:&quot;zh-CN&quot;,&quot;comments&quot;:true,&quot;permalink&quot;:&quot;http:&#x2F;&#x2F;erbi.me&#x2F;1688&#x2F;&quot;,&quot;path&quot;:&quot;1688&#x2F;&quot;,&quot;title&quot;:&quot;Redis Cluster集群搭建&quot;}</script>

<script class="next-config" data-name="calendar" type="application/json">&quot;&quot;</script>
<title>Redis Cluster集群搭建 | 记忆角落</title>
  

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?<46c2f95d60e43eb48d99ddf240e9771c>"></script>



  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">记忆角落</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">生活,一半是回忆,一半是继续.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
        <li class="menu-item menu-item-commonweal"><a href="/links/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>邻居</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis-Cluster%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.</span> <span class="nav-text">Redis Cluster介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A6%82%E5%BF%B5"><span class="nav-number">1.1.</span> <span class="nav-text">概念</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9E%B6%E6%9E%84"><span class="nav-number">2.</span> <span class="nav-text">架构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Redis-Cluster%E6%90%AD%E5%BB%BA"><span class="nav-number">3.</span> <span class="nav-text">Redis Cluster搭建</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E4%B8%8A%E4%BC%A0redis%E5%AE%89%E8%A3%85%E5%8C%85"><span class="nav-number">3.1.</span> <span class="nav-text">1.上传redis安装包</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E5%AE%89%E8%A3%85GCC"><span class="nav-number">3.2.</span> <span class="nav-text">2.安装GCC</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E8%A7%A3%E5%8E%8B%E5%B9%B6%E5%AE%89%E8%A3%85"><span class="nav-number">3.3.</span> <span class="nav-text">3.解压并安装</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E5%88%9B%E5%BB%BA%E5%A4%9A%E4%B8%AA%E5%AE%9E%E4%BE%8B"><span class="nav-number">3.4.</span> <span class="nav-text">4.创建多个实例</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">3.5.</span> <span class="nav-text">5.配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-Redis%E5%90%AF%E5%8A%A8"><span class="nav-number">3.6.</span> <span class="nav-text">6.Redis启动</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-%E5%90%AF%E5%8A%A8%E9%9B%86%E7%BE%A4"><span class="nav-number">3.7.</span> <span class="nav-text">7.启动集群</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-%E6%9F%A5%E7%9C%8B%E9%9B%86%E7%BE%A4%E4%BF%A1%E6%81%AF%E5%B9%B6%E4%B8%94%E9%AA%8C%E8%AF%81"><span class="nav-number">3.8.</span> <span class="nav-text">8.查看集群信息并且验证</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-Redis%E7%9A%84%E4%B8%89%E7%A7%8D%E5%90%AF%E5%8A%A8%E6%96%B9%E5%BC%8F%E3%80%81%E5%81%9C%E6%AD%A2"><span class="nav-number">3.9.</span> <span class="nav-text">6.Redis的三种启动方式、停止</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E7%9B%B4%E6%8E%A5%E5%90%AF%E5%8A%A8"><span class="nav-number">3.9.1.</span> <span class="nav-text">1.直接启动</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E9%80%9A%E8%BF%87%E6%8C%87%E5%AE%9A%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%90%AF%E5%8A%A8"><span class="nav-number">3.9.2.</span> <span class="nav-text">2.通过指定配置文件启动</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-%E5%90%AF%E5%8A%A8%E6%8C%87%E5%AE%9AIP%E7%9A%84redis-cli-h-IP%E5%9C%B0%E5%9D%80%E3%80%81-p-%E7%AB%AF%E5%8F%A3%E3%80%81-a-%E5%AF%86%E7%A0%81"><span class="nav-number">3.9.3.</span> <span class="nav-text">3.启动指定IP的redis-cli(-h IP地址、-p 端口、-a 密码)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-%E5%81%9C%E6%AD%A2%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4"><span class="nav-number">3.9.4.</span> <span class="nav-text">4.停止执行命令:</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-redis%E9%9B%86%E7%BE%A4%E5%88%A0%E9%99%A4"><span class="nav-number">3.9.5.</span> <span class="nav-text">5.redis集群删除</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="郭良俊只狗"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">郭良俊只狗</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">392</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">31</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">255</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://gitee.com/guoliangjun17" title="Gitee → https:&#x2F;&#x2F;gitee.com&#x2F;guoliangjun17" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:admin@199604.com" title="E-Mail → mailto:admin@199604.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/jiomer" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;jiomer" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i></a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://erbi.me/1688/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郭良俊只狗">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="记忆角落">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Redis Cluster集群搭建
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-19 18:11:19" itemprop="dateCreated datePublished" datetime="2021-03-19T18:11:19+08:00">2021-03-19</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-06-10 09:36:15" itemprop="dateModified" datetime="2021-06-10T09:36:15+08:00">2021-06-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/redis/" itemprop="url" rel="index"><span itemprop="name">redis</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h3 id="Redis-Cluster介绍"><a href="#Redis-Cluster介绍" class="headerlink" title="Redis Cluster介绍"></a>Redis Cluster介绍</h3><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><p>Redis 集群是一个提供在多个Redis间节点间共享数据的程序集。 Redis集群并不支持处理多个keys的命令,因为这需要在不同的节点间移动数据,从而达不到像Redis那样的性能,在高负载的情况下可能会导致不可预料的错误. Redis 集群通过分区来提供一定程度的可用性,在实际环境中当某个节点宕机或者不可达的情况下继续处理命令. Redis 集群的优势:</p>
<ul>
<li>  自动分割数据到不同的节点上。</li>
<li>  整个集群的部分节点失败或者不可达的情况下能够继续处理命令。</li>
</ul>
<h3 id="架构"><a href="#架构" class="headerlink" title="架构"></a>架构</h3><p>参考官网：<a target="_blank" rel="noopener" href="https://redis.io/topics/cluster-tutorial/">https://redis.io/topics/cluster-tutorial/</a> Redis Cluster 可以看成是由多个 Redis 实例组成的数据集合。客户端不需要关注数 据的子集到底存储在哪个节点，只需要关注这个集合整体。 以 3 主 3 从为例，节点之间两两交互，共享数据分片、节点状态等信息； <img src="http://qn.199604.com/typoraImg/20200411235453287.png" alt="在这里插入图片描述"></p>
<h3 id="Redis-Cluster搭建"><a href="#Redis-Cluster搭建" class="headerlink" title="Redis Cluster搭建"></a>Redis Cluster搭建</h3><p>部署前提： 高可用Redis cluster集群(20)，主从+哨兵一台机器70个服务，每个服务限定10G内存(记得是运存，不是数据盘)</p>
<h4 id="1-上传redis安装包"><a href="#1-上传redis安装包" class="headerlink" title="1.上传redis安装包"></a>1.上传redis安装包</h4><p>这里用得是redis-5.0.9.tar.gz 上传文件到 目录<code>/usr/local</code> 或者外网直接下载</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://download.redis.io/releases/redis-5.0.9.tar.gz</span><br></pre></td></tr></table></figure>

<h4 id="2-安装GCC"><a href="#2-安装GCC" class="headerlink" title="2.安装GCC"></a>2.安装GCC</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install gcc</span><br></pre></td></tr></table></figure>

<h4 id="3-解压并安装"><a href="#3-解压并安装" class="headerlink" title="3.解压并安装"></a>3.解压并安装</h4><p>解压</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar xzvf redis-5.0.9.tar.gz</span><br></pre></td></tr></table></figure>

<p>编译安装</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd redis-5.0.9</span><br><span class="line">make</span><br><span class="line">cd src</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>

<p>建立一个软连接</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s redis-5.0.9 redis</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注：如出现/bin/sh: cc: command not found错误，是因为没有安装 gcc 环境，使用命令yum install gcc安装 gcc 环境即可</p>
</blockquote>
<p><img src="http://qn.199604.com/typoraImg/image-20210319173020188.png" alt="image-20210319173020188">   测试是否安装成功</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#进入redis目录</span><br><span class="line">cd redis</span><br><span class="line"># 执行启动命令 读取默认配置文件</span><br><span class="line">redis-server ./redis.conf </span><br><span class="line"># 连接测试，默认是6379</span><br><span class="line">redis-cli -p 6379</span><br></pre></td></tr></table></figure>

<h4 id="4-创建多个实例"><a href="#4-创建多个实例" class="headerlink" title="4.创建多个实例"></a>4.创建多个实例</h4><p>Redis 单机多实例部署方法十分简单，只要复制多个 redis 配置文件即可。需要注意每个实例的端口不能冲突。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">mkdir /data/redis-cluster</span><br><span class="line"></span><br><span class="line">cd /data/redis-cluster/</span><br><span class="line"></span><br><span class="line">#创建 70个文件夹(70个服务)</span><br><span class="line">mkdir 700&#123;1..9&#125;</span><br><span class="line">mkdir 701&#123;0..9&#125;</span><br><span class="line">mkdir 702&#123;0..9&#125;</span><br><span class="line">mkdir 703&#123;0..9&#125;</span><br><span class="line">mkdir 704&#123;0..9&#125;</span><br><span class="line">mkdir 705&#123;0..9&#125;</span><br><span class="line">mkdir 706&#123;0..9&#125;</span><br><span class="line">mkdir 7070</span><br><span class="line"></span><br><span class="line">[root@pod3-highapp-a-23 local]# cd /data/redis-cluster/</span><br><span class="line">[root@pod3-highapp-a-23 redis-cluster]# ls</span><br><span class="line">7001  7003  7005  7007  7009  7011  7013  7015  7017  7019  7021  7023  7025  7027  7029  7031  7033  7035  7037  7039  7041  7043  7045  7047  7049  7051  7053  7055  7057  7059  7061  7063  7065  7067  7069</span><br><span class="line">7002  7004  7006  7008  7010  7012  7014  7016  7018  7020  7022  7024  7026  7028  7030  7032  7034  7036  7038  7040  7042  7044  7046  7048  7050  7052  7054  7056  7058  7060  7062  7064  7066  7068  7070</span><br></pre></td></tr></table></figure>

<h4 id="5-配置文件"><a href="#5-配置文件" class="headerlink" title="5.配置文件"></a>5.配置文件</h4><p>配置文件信息如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br></pre></td><td class="code"><pre><span class="line"># 守护进程模式</span><br><span class="line">daemonize yes </span><br><span class="line"># pid file 修改pidfile指向路径</span><br><span class="line">pidfile /data/redis-cluster/7001/7001.pid</span><br><span class="line"></span><br><span class="line"># 指明日志文件名</span><br><span class="line">logfile &quot;/data/redis-cluster/7001/7001.log&quot;</span><br><span class="line"></span><br><span class="line"># 工作目录</span><br><span class="line">dir /data/redis-cluster/7001/</span><br><span class="line"># 监听端口</span><br><span class="line">port 7001</span><br><span class="line"></span><br><span class="line">#如果是yes，表示启用集群，否则以单例模式启动</span><br><span class="line">cluster-enabled yes</span><br><span class="line"></span><br><span class="line">#请注意，尽管有此选项的名称</span><br><span class="line">cluster-config-file nodes.conf</span><br><span class="line"></span><br><span class="line">#Redis群集节点超过不可用的最长时间</span><br><span class="line">cluster-node-timeout 15000</span><br><span class="line"></span><br><span class="line"># TCP接收队列长度，受/proc/sys/net/core/somaxconn和tcp_max_syn_backlog这两个内核参数的影响</span><br><span class="line">tcp-backlog 511</span><br><span class="line"></span><br><span class="line"># 一个客户端空闲多少秒后关闭连接(0代表禁用，永不关闭)</span><br><span class="line">timeout 0</span><br><span class="line"></span><br><span class="line"># 如果非零，则设置SO_KEEPALIVE选项来向空闲连接的客户端发送ACK</span><br><span class="line">tcp-keepalive 300</span><br><span class="line"></span><br><span class="line"># 指定服务器调试等级</span><br><span class="line"># 可能值：</span><br><span class="line"># debug （大量信息，对开发/测试有用）</span><br><span class="line"># verbose （很多精简的有用信息，但是不像debug等级那么多）</span><br><span class="line"># notice （适量的信息，基本上是你生产环境中需要的）</span><br><span class="line"># warning （只有很重要/严重的信息会记录下来）</span><br><span class="line">loglevel notice</span><br><span class="line"></span><br><span class="line"># 设置数据库个数</span><br><span class="line">databases 16</span><br><span class="line"></span><br><span class="line"># 会在指定秒数和数据变化次数之后把数据库写到磁盘上</span><br><span class="line"># 900秒（15分钟）之后，且至少1次变更</span><br><span class="line"># 300秒（5分钟）之后，且至少10次变更</span><br><span class="line"># 60秒之后，且至少10000次变更</span><br><span class="line">save &quot;&quot;</span><br><span class="line">#save 900 1</span><br><span class="line">#save 300 10</span><br><span class="line">#save 60 10000</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 默认如果开启RDB快照(至少一条save指令)并且最新的后台保存失败，Redis将会停止接受写操作</span><br><span class="line"># 这将使用户知道数据没有正确的持久化到硬盘，否则可能没人注意到并且造成一些灾难</span><br><span class="line">stop-writes-on-bgsave-error yes</span><br><span class="line"></span><br><span class="line"># 当导出到 .rdb 数据库时是否用LZF压缩字符串对象</span><br><span class="line">rdbcompression yes</span><br><span class="line"></span><br><span class="line"># 版本5的RDB有一个CRC64算法的校验和放在了文件的最后。这将使文件格式更加可靠。</span><br><span class="line">rdbchecksum yes</span><br><span class="line"></span><br><span class="line"># 持久化数据库的文件名</span><br><span class="line">dbfilename dump.rdb</span><br><span class="line"></span><br><span class="line"># 当master服务设置了密码保护时，slav服务连接master的密码</span><br><span class="line">masterauth NBD</span><br><span class="line"></span><br><span class="line"># 当一个slave失去和master的连接，或者同步正在进行中，slave的行为可以有两种：</span><br><span class="line">#</span><br><span class="line"># 1) 如果 slave-serve-stale-data 设置为 &quot;yes&quot; (默认值)，slave会继续响应客户端请求，</span><br><span class="line"># 可能是正常数据，或者是过时了的数据，也可能是还没获得值的空数据。</span><br><span class="line"># 2) 如果 slave-serve-stale-data 设置为 &quot;no&quot;，slave会回复&quot;正在从master同步</span><br><span class="line"># （SYNC with master in progress）&quot;来处理各种请求，除了 INFO 和 SLAVEOF 命令。</span><br><span class="line">slave-serve-stale-data yes</span><br><span class="line"></span><br><span class="line"># 你可以配置salve实例是否接受写操作。可写的slave实例可能对存储临时数据比较有用(因为写入salve</span><br><span class="line"># 的数据在同master同步之后将很容易被删除</span><br><span class="line">slave-read-only yes</span><br><span class="line"></span><br><span class="line"># 是否在slave套接字发送SYNC之后禁用 TCP_NODELAY？</span><br><span class="line"># 如果你选择“yes”Redis将使用更少的TCP包和带宽来向slaves发送数据。但是这将使数据传输到slave</span><br><span class="line"># 上有延迟，Linux内核的默认配置会达到40毫秒</span><br><span class="line"># 如果你选择了 &quot;no&quot; 数据传输到salve的延迟将会减少但要使用更多的带宽</span><br><span class="line">repl-disable-tcp-nodelay no</span><br><span class="line"></span><br><span class="line"># slave的优先级是一个整数展示在Redis的Info输出中。如果master不再正常工作了，哨兵将用它来</span><br><span class="line"># 选择一个slave提升=升为master。</span><br><span class="line"># 优先级数字小的salve会优先考虑提升为master，所以例如有三个slave优先级分别为10，100，25，</span><br><span class="line"># 哨兵将挑选优先级最小数字为10的slave。</span><br><span class="line"># 0作为一个特殊的优先级，标识这个slave不能作为master，所以一个优先级为0的slave永远不会被</span><br><span class="line"># 哨兵挑选提升为master</span><br><span class="line">slave-priority 100</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 密码验证</span><br><span class="line"># 警告：因为Redis太快了，所以外面的人可以尝试每秒150k的密码来试图破解密码。这意味着你需要</span><br><span class="line"># 一个高强度的密码，否则破解太容易了</span><br><span class="line">requirepass NBD</span><br><span class="line"></span><br><span class="line"># redis实例最大占用内存，不要用比设置的上限更多的内存。一旦内存使用达到上限，Redis会根据选定的回收策略（参见：</span><br><span class="line"># maxmemmory-policy）删除key</span><br><span class="line">maxmemory 10gb</span><br><span class="line"></span><br><span class="line"># 最大内存策略：如果达到内存限制了，Redis如何选择删除key。你可以在下面五个行为里选：</span><br><span class="line"># volatile-lru -&gt; 根据LRU算法删除带有过期时间的key。</span><br><span class="line"># allkeys-lru -&gt; 根据LRU算法删除任何key。</span><br><span class="line"># volatile-random -&gt; 根据过期设置来随机删除key, 具备过期时间的key。 </span><br><span class="line"># allkeys-&gt;random -&gt; 无差别随机删, 任何一个key。 </span><br><span class="line"># volatile-ttl -&gt; 根据最近过期时间来删除（辅以TTL）, 这是对于有过期时间的key </span><br><span class="line"># noeviction -&gt; 谁也不删，直接在写操作时返回错误。</span><br><span class="line">maxmemory-policy volatile-lru</span><br><span class="line"></span><br><span class="line"># 默认情况下，Redis是异步的把数据导出到磁盘上。这种模式在很多应用里已经足够好，但Redis进程</span><br><span class="line"># 出问题或断电时可能造成一段时间的写操作丢失(这取决于配置的save指令)。</span><br><span class="line">#</span><br><span class="line"># AOF是一种提供了更可靠的替代持久化模式，例如使用默认的数据写入文件策略（参见后面的配置）</span><br><span class="line"># 在遇到像服务器断电或单写情况下Redis自身进程出问题但操作系统仍正常运行等突发事件时，Redis</span><br><span class="line"># 能只丢失1秒的写操作。</span><br><span class="line">#</span><br><span class="line"># AOF和RDB持久化能同时启动并且不会有问题。</span><br><span class="line"># 如果AOF开启，那么在启动时Redis将加载AOF文件，它更能保证数据的可靠性。</span><br><span class="line">appendonly no</span><br><span class="line"></span><br><span class="line"># aof文件名</span><br><span class="line">appendfilename &quot;appendonly.aof&quot;</span><br><span class="line"></span><br><span class="line"># fsync() 系统调用告诉操作系统把数据写到磁盘上，而不是等更多的数据进入输出缓冲区。</span><br><span class="line"># 有些操作系统会真的把数据马上刷到磁盘上；有些则会尽快去尝试这么做。</span><br><span class="line">#</span><br><span class="line"># Redis支持三种不同的模式：</span><br><span class="line">#</span><br><span class="line"># no：不要立刻刷，只有在操作系统需要刷的时候再刷。比较快。</span><br><span class="line"># always：每次写操作都立刻写入到aof文件。慢，但是最安全。</span><br><span class="line"># everysec：每秒写一次。折中方案。 </span><br><span class="line">appendfsync everysec</span><br><span class="line"></span><br><span class="line"># 如果AOF的同步策略设置成 &quot;always&quot; 或者 &quot;everysec&quot;，并且后台的存储进程（后台存储或写入AOF</span><br><span class="line"># 日志）会产生很多磁盘I/O开销。某些Linux的配置下会使Redis因为 fsync()系统调用而阻塞很久。</span><br><span class="line"># 注意，目前对这个情况还没有完美修正，甚至不同线程的 fsync() 会阻塞我们同步的write(2)调用。</span><br><span class="line">#</span><br><span class="line"># 为了缓解这个问题，可以用下面这个选项。它可以在 BGSAVE 或 BGREWRITEAOF 处理时阻止主进程进行fsync()。</span><br><span class="line"># </span><br><span class="line"># 这就意味着如果有子进程在进行保存操作，那么Redis就处于&quot;不可同步&quot;的状态。</span><br><span class="line"># 这实际上是说，在最差的情况下可能会丢掉30秒钟的日志数据。（默认Linux设定）</span><br><span class="line"># </span><br><span class="line"># 如果你有延时问题把这个设置成&quot;yes&quot;，否则就保持&quot;no&quot;，这是保存持久数据的最安全的方式。</span><br><span class="line">no-appendfsync-on-rewrite yes</span><br><span class="line"></span><br><span class="line"># 自动重写AOF文件</span><br><span class="line">auto-aof-rewrite-percentage 100</span><br><span class="line">auto-aof-rewrite-min-size 64mb</span><br><span class="line"></span><br><span class="line"># AOF文件可能在尾部是不完整的（这跟system关闭有问题，尤其是mount ext4文件系统时</span><br><span class="line"># 没有加上data=ordered选项。只会发生在os死时，redis自己死不会不完整）。</span><br><span class="line"># 那redis重启时load进内存的时候就有问题了。</span><br><span class="line"># 发生的时候，可以选择redis启动报错，并且通知用户和写日志，或者load尽量多正常的数据。</span><br><span class="line"># 如果aof-load-truncated是yes，会自动发布一个log给客户端然后load（默认）。</span><br><span class="line"># 如果是no，用户必须手动redis-check-aof修复AOF文件才可以。</span><br><span class="line"># 注意，如果在读取的过程中，发现这个aof是损坏的，服务器也是会退出的，</span><br><span class="line"># 这个选项仅仅用于当服务器尝试读取更多的数据但又找不到相应的数据时。</span><br><span class="line">aof-load-truncated yes</span><br><span class="line"></span><br><span class="line"># Lua 脚本的最大执行时间，毫秒为单位</span><br><span class="line">lua-time-limit 5000</span><br><span class="line"></span><br><span class="line"># Redis慢查询日志可以记录超过指定时间的查询</span><br><span class="line">slowlog-log-slower-than 10000</span><br><span class="line"></span><br><span class="line"># 这个长度没有限制。只是要主要会消耗内存。你可以通过 SLOWLOG RESET 来回收内存。</span><br><span class="line">slowlog-max-len 128</span><br><span class="line"></span><br><span class="line"># redis延时监控系统在运行时会采样一些操作，以便收集可能导致延时的数据根源。</span><br><span class="line"># 通过 LATENCY命令 可以打印一些图样和获取一些报告，方便监控</span><br><span class="line"># 这个系统仅仅记录那个执行时间大于或等于预定时间（毫秒）的操作, </span><br><span class="line"># 这个预定时间是通过latency-monitor-threshold配置来指定的，</span><br><span class="line"># 当设置为0时，这个监控系统处于停止状态</span><br><span class="line">latency-monitor-threshold 0</span><br><span class="line"></span><br><span class="line"># Redis能通知 Pub/Sub 客户端关于键空间发生的事件，默认关闭</span><br><span class="line">notify-keyspace-events &quot;&quot;</span><br><span class="line"></span><br><span class="line"># 当hash只有少量的entry时，并且最大的entry所占空间没有超过指定的限制时，会用一种节省内存的</span><br><span class="line"># 数据结构来编码。可以通过下面的指令来设定限制</span><br><span class="line">hash-max-ziplist-entries 512</span><br><span class="line">hash-max-ziplist-value 64</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># set有一种特殊编码的情况：当set数据全是十进制64位有符号整型数字构成的字符串时。</span><br><span class="line"># 下面这个配置项就是用来设置set使用这种编码来节省内存的最大长度。</span><br><span class="line">set-max-intset-entries 512</span><br><span class="line"></span><br><span class="line"># 与hash和list相似，有序集合也可以用一种特别的编码方式来节省大量空间。</span><br><span class="line"># 这种编码只适合长度和元素都小于下面限制的有序集合</span><br><span class="line">zset-max-ziplist-entries 128</span><br><span class="line">zset-max-ziplist-value 64</span><br><span class="line"></span><br><span class="line"># HyperLogLog稀疏结构表示字节的限制。该限制包括</span><br><span class="line"># 16个字节的头。当HyperLogLog使用稀疏结构表示</span><br><span class="line"># 这些限制，它会被转换成密度表示。</span><br><span class="line"># 值大于16000是完全没用的，因为在该点</span><br><span class="line"># 密集的表示是更多的内存效率。</span><br><span class="line"># 建议值是3000左右，以便具有的内存好处, 减少内存的消耗</span><br><span class="line">hll-sparse-max-bytes 3000</span><br><span class="line"></span><br><span class="line"># 启用哈希刷新，每100个CPU毫秒会拿出1个毫秒来刷新Redis的主哈希表（顶级键值映射表）</span><br><span class="line">activerehashing yes</span><br><span class="line"></span><br><span class="line"># 客户端的输出缓冲区的限制，可用于强制断开那些因为某种原因从服务器读取数据的速度不够快的客户端</span><br><span class="line">client-output-buffer-limit normal 0 0 0</span><br><span class="line">client-output-buffer-limit slave 256mb 64mb 60</span><br><span class="line">client-output-buffer-limit pubsub 32mb 8mb 60</span><br><span class="line"></span><br><span class="line"># 默认情况下，“hz”的被设定为10。提高该值将在Redis空闲时使用更多的CPU时，但同时当有多个key</span><br><span class="line"># 同时到期会使Redis的反应更灵敏，以及超时可以更精确地处理</span><br><span class="line">hz 10</span><br><span class="line"></span><br><span class="line"># 当一个子进程重写AOF文件时，如果启用下面的选项，则文件每生成32M数据会被同步</span><br><span class="line">aof-rewrite-incremental-fsync yes</span><br></pre></td></tr></table></figure>

<p>将配置文件复制到其它文件夹下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">cp redis.conf /data/redis-cluster/7001/</span><br><span class="line">cp redis.conf /data/redis-cluster/7002/</span><br><span class="line">cp redis.conf /data/redis-cluster/7003/</span><br><span class="line">cp redis.conf /data/redis-cluster/7004/</span><br><span class="line">cp redis.conf /data/redis-cluster/7005/</span><br><span class="line">cp redis.conf /data/redis-cluster/7006/</span><br><span class="line">cp redis.conf /data/redis-cluster/7007/</span><br><span class="line">cp redis.conf /data/redis-cluster/7008/</span><br><span class="line">cp redis.conf /data/redis-cluster/7009/</span><br><span class="line">cp redis.conf /data/redis-cluster/7010/</span><br><span class="line"></span><br><span class="line">cp redis.conf /data/redis-cluster/7011/</span><br><span class="line">cp redis.conf /data/redis-cluster/7012/</span><br><span class="line">cp redis.conf /data/redis-cluster/7013/</span><br><span class="line">cp redis.conf /data/redis-cluster/7014/</span><br><span class="line">cp redis.conf /data/redis-cluster/7015/</span><br><span class="line">cp redis.conf /data/redis-cluster/7016/</span><br><span class="line">cp redis.conf /data/redis-cluster/7017/</span><br><span class="line">cp redis.conf /data/redis-cluster/7018/</span><br><span class="line">cp redis.conf /data/redis-cluster/7019/</span><br><span class="line">cp redis.conf /data/redis-cluster/7020/</span><br><span class="line"></span><br><span class="line">cp redis.conf /data/redis-cluster/7021/</span><br><span class="line">cp redis.conf /data/redis-cluster/7022/</span><br><span class="line">cp redis.conf /data/redis-cluster/7023/</span><br><span class="line">cp redis.conf /data/redis-cluster/7024/</span><br><span class="line">cp redis.conf /data/redis-cluster/7025/</span><br><span class="line">cp redis.conf /data/redis-cluster/7026/</span><br><span class="line">cp redis.conf /data/redis-cluster/7027/</span><br><span class="line">cp redis.conf /data/redis-cluster/7028/</span><br><span class="line">cp redis.conf /data/redis-cluster/7029/</span><br><span class="line"></span><br><span class="line">cp redis.conf /data/redis-cluster/7030/</span><br><span class="line">cp redis.conf /data/redis-cluster/7031/</span><br><span class="line">cp redis.conf /data/redis-cluster/7032/</span><br><span class="line">cp redis.conf /data/redis-cluster/7033/</span><br><span class="line">cp redis.conf /data/redis-cluster/7034/</span><br><span class="line">cp redis.conf /data/redis-cluster/7035/</span><br><span class="line">cp redis.conf /data/redis-cluster/7036/</span><br><span class="line">cp redis.conf /data/redis-cluster/7037/</span><br><span class="line">cp redis.conf /data/redis-cluster/7038/</span><br><span class="line">cp redis.conf /data/redis-cluster/7039/</span><br><span class="line"></span><br><span class="line">cp redis.conf /data/redis-cluster/7040/</span><br><span class="line">cp redis.conf /data/redis-cluster/7041/</span><br><span class="line">cp redis.conf /data/redis-cluster/7042/</span><br><span class="line">cp redis.conf /data/redis-cluster/7043/</span><br><span class="line">cp redis.conf /data/redis-cluster/7044/</span><br><span class="line">cp redis.conf /data/redis-cluster/7045/</span><br><span class="line">cp redis.conf /data/redis-cluster/7046/</span><br><span class="line">cp redis.conf /data/redis-cluster/7047/</span><br><span class="line">cp redis.conf /data/redis-cluster/7048/</span><br><span class="line">cp redis.conf /data/redis-cluster/7049/</span><br><span class="line"></span><br><span class="line">cp redis.conf /data/redis-cluster/7050/</span><br><span class="line">cp redis.conf /data/redis-cluster/7051/</span><br><span class="line">cp redis.conf /data/redis-cluster/7052/</span><br><span class="line">cp redis.conf /data/redis-cluster/7053/</span><br><span class="line">cp redis.conf /data/redis-cluster/7054/</span><br><span class="line">cp redis.conf /data/redis-cluster/7055/</span><br><span class="line">cp redis.conf /data/redis-cluster/7056/</span><br><span class="line">cp redis.conf /data/redis-cluster/7057/</span><br><span class="line">cp redis.conf /data/redis-cluster/7058/</span><br><span class="line">cp redis.conf /data/redis-cluster/7059/</span><br><span class="line"></span><br><span class="line">cp redis.conf /data/redis-cluster/7060/</span><br><span class="line">cp redis.conf /data/redis-cluster/7061/</span><br><span class="line">cp redis.conf /data/redis-cluster/7062/</span><br><span class="line">cp redis.conf /data/redis-cluster/7063/</span><br><span class="line">cp redis.conf /data/redis-cluster/7064/</span><br><span class="line">cp redis.conf /data/redis-cluster/7065/</span><br><span class="line">cp redis.conf /data/redis-cluster/7066/</span><br><span class="line">cp redis.conf /data/redis-cluster/7067/</span><br><span class="line">cp redis.conf /data/redis-cluster/7068/</span><br><span class="line">cp redis.conf /data/redis-cluster/7069/</span><br><span class="line">cp redis.conf /data/redis-cluster/7070/</span><br></pre></td></tr></table></figure>

<p>批量替换内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">sed -i &#x27;s/7001/7001/g&#x27; 7001/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7002/g&#x27; 7002/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7003/g&#x27; 7003/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7004/g&#x27; 7004/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7005/g&#x27; 7005/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7006/g&#x27; 7006/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7007/g&#x27; 7007/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7008/g&#x27; 7008/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7009/g&#x27; 7009/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7010/g&#x27; 7010/redis.conf</span><br><span class="line"></span><br><span class="line">sed -i &#x27;s/7001/7011/g&#x27; 7011/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7012/g&#x27; 7012/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7013/g&#x27; 7013/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7014/g&#x27; 7014/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7015/g&#x27; 7015/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7016/g&#x27; 7016/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7017/g&#x27; 7017/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7018/g&#x27; 7018/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7019/g&#x27; 7019/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7020/g&#x27; 7020/redis.conf</span><br><span class="line"></span><br><span class="line">sed -i &#x27;s/7001/7021/g&#x27; 7021/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7022/g&#x27; 7022/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7023/g&#x27; 7023/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7024/g&#x27; 7024/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7025/g&#x27; 7025/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7026/g&#x27; 7026/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7027/g&#x27; 7027/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7028/g&#x27; 7028/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7029/g&#x27; 7029/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7030/g&#x27; 7030/redis.conf</span><br><span class="line"></span><br><span class="line">sed -i &#x27;s/7001/7031/g&#x27; 7031/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7032/g&#x27; 7032/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7033/g&#x27; 7033/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7034/g&#x27; 7034/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7035/g&#x27; 7035/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7036/g&#x27; 7036/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7037/g&#x27; 7037/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7038/g&#x27; 7038/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7039/g&#x27; 7039/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7040/g&#x27; 7040/redis.conf</span><br><span class="line"></span><br><span class="line">sed -i &#x27;s/7001/7041/g&#x27; 7041/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7042/g&#x27; 7042/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7043/g&#x27; 7043/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7044/g&#x27; 7044/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7045/g&#x27; 7045/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7046/g&#x27; 7046/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7047/g&#x27; 7047/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7048/g&#x27; 7048/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7049/g&#x27; 7049/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7050/g&#x27; 7050/redis.conf</span><br><span class="line"></span><br><span class="line">sed -i &#x27;s/7001/7051/g&#x27; 7051/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7052/g&#x27; 7052/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7053/g&#x27; 7053/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7054/g&#x27; 7054/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7055/g&#x27; 7055/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7056/g&#x27; 7056/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7057/g&#x27; 7057/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7058/g&#x27; 7058/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7059/g&#x27; 7059/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7060/g&#x27; 7060/redis.conf</span><br><span class="line"></span><br><span class="line">sed -i &#x27;s/7001/7061/g&#x27; 7061/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7062/g&#x27; 7062/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7063/g&#x27; 7063/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7064/g&#x27; 7064/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7065/g&#x27; 7065/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7066/g&#x27; 7066/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7067/g&#x27; 7067/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7068/g&#x27; 7068/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7069/g&#x27; 7069/redis.conf</span><br><span class="line">sed -i &#x27;s/7001/7070/g&#x27; 7070/redis.conf</span><br></pre></td></tr></table></figure>

<p>复制到其他19台机器：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">scp -rp redis-cluster root@10.209.17.101:/data/</span><br><span class="line">scp -rp redis-cluster root@10.209.17.103:/data/</span><br><span class="line">scp -rp redis-cluster root@10.209.17.105:/data/</span><br><span class="line">scp -rp redis-cluster root@10.209.17.106:/data/</span><br><span class="line">scp -rp redis-cluster root@10.209.17.11:/data/</span><br><span class="line">scp -rp redis-cluster root@10.209.17.110:/data/</span><br><span class="line">scp -rp redis-cluster root@10.209.17.117:/data/</span><br><span class="line">scp -rp redis-cluster root@10.209.17.12:/data/</span><br><span class="line">scp -rp redis-cluster root@10.209.17.122:/data/</span><br><span class="line">scp -rp redis-cluster root@10.209.17.13:/data/</span><br><span class="line">scp -rp redis-cluster root@10.209.17.14:/data/</span><br><span class="line">scp -rp redis-cluster root@10.209.17.15:/data/</span><br><span class="line">scp -rp redis-cluster root@10.209.17.16:/data/</span><br><span class="line">scp -rp redis-cluster root@10.209.17.17:/data/</span><br><span class="line">scp -rp redis-cluster root@10.209.17.18:/data/</span><br><span class="line">scp -rp redis-cluster root@10.209.17.19:/data/</span><br><span class="line">scp -rp redis-cluster root@10.209.17.2:/data/</span><br><span class="line">scp -rp redis-cluster root@10.209.17.20:/data/</span><br><span class="line">scp -rp redis-cluster root@10.209.17.21:/data/</span><br></pre></td></tr></table></figure>

<h4 id="6-Redis启动"><a href="#6-Redis启动" class="headerlink" title="6.Redis启动"></a>6.Redis启动</h4><p>启动70个redis实例。 建议直接建立一个startRedis.sh</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">redis-server ./7001/redis.conf</span><br><span class="line">redis-server ./7002/redis.conf</span><br><span class="line">redis-server ./7003/redis.conf</span><br><span class="line">redis-server ./7004/redis.conf</span><br><span class="line">redis-server ./7005/redis.conf</span><br><span class="line">redis-server ./7006/redis.conf</span><br><span class="line">redis-server ./7007/redis.conf</span><br><span class="line">redis-server ./7008/redis.conf</span><br><span class="line">redis-server ./7009/redis.conf</span><br><span class="line">redis-server ./7010/redis.conf</span><br><span class="line">redis-server ./7011/redis.conf</span><br><span class="line">redis-server ./7012/redis.conf</span><br><span class="line">redis-server ./7013/redis.conf</span><br><span class="line">redis-server ./7014/redis.conf</span><br><span class="line">redis-server ./7015/redis.conf</span><br><span class="line">redis-server ./7016/redis.conf</span><br><span class="line">redis-server ./7017/redis.conf</span><br><span class="line">redis-server ./7018/redis.conf</span><br><span class="line">redis-server ./7019/redis.conf</span><br><span class="line">redis-server ./7020/redis.conf</span><br><span class="line">redis-server ./7021/redis.conf</span><br><span class="line">redis-server ./7022/redis.conf</span><br><span class="line">redis-server ./7023/redis.conf</span><br><span class="line">redis-server ./7024/redis.conf</span><br><span class="line">redis-server ./7025/redis.conf</span><br><span class="line">redis-server ./7026/redis.conf</span><br><span class="line">redis-server ./7027/redis.conf</span><br><span class="line">redis-server ./7028/redis.conf</span><br><span class="line">redis-server ./7029/redis.conf</span><br><span class="line">redis-server ./7030/redis.conf</span><br><span class="line">redis-server ./7031/redis.conf</span><br><span class="line">redis-server ./7032/redis.conf</span><br><span class="line">redis-server ./7033/redis.conf</span><br><span class="line">redis-server ./7034/redis.conf</span><br><span class="line">redis-server ./7035/redis.conf</span><br><span class="line">redis-server ./7036/redis.conf</span><br><span class="line">redis-server ./7037/redis.conf</span><br><span class="line">redis-server ./7038/redis.conf</span><br><span class="line">redis-server ./7039/redis.conf</span><br><span class="line">redis-server ./7040/redis.conf</span><br><span class="line">redis-server ./7041/redis.conf</span><br><span class="line">redis-server ./7042/redis.conf</span><br><span class="line">redis-server ./7043/redis.conf</span><br><span class="line">redis-server ./7044/redis.conf</span><br><span class="line">redis-server ./7045/redis.conf</span><br><span class="line">redis-server ./7046/redis.conf</span><br><span class="line">redis-server ./7047/redis.conf</span><br><span class="line">redis-server ./7048/redis.conf</span><br><span class="line">redis-server ./7049/redis.conf</span><br><span class="line">redis-server ./7050/redis.conf</span><br><span class="line">redis-server ./7051/redis.conf</span><br><span class="line">redis-server ./7052/redis.conf</span><br><span class="line">redis-server ./7053/redis.conf</span><br><span class="line">redis-server ./7054/redis.conf</span><br><span class="line">redis-server ./7055/redis.conf</span><br><span class="line">redis-server ./7056/redis.conf</span><br><span class="line">redis-server ./7057/redis.conf</span><br><span class="line">redis-server ./7058/redis.conf</span><br><span class="line">redis-server ./7059/redis.conf</span><br><span class="line">redis-server ./7060/redis.conf</span><br><span class="line">redis-server ./7061/redis.conf</span><br><span class="line">redis-server ./7062/redis.conf</span><br><span class="line">redis-server ./7063/redis.conf</span><br><span class="line">redis-server ./7064/redis.conf</span><br><span class="line">redis-server ./7065/redis.conf</span><br><span class="line">redis-server ./7066/redis.conf</span><br><span class="line">redis-server ./7067/redis.conf</span><br><span class="line">redis-server ./7068/redis.conf</span><br><span class="line">redis-server ./7069/redis.conf</span><br><span class="line">redis-server ./7070/redis.conf</span><br></pre></td></tr></table></figure>

<p>查看进程：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">[root@pod3-highapp-a-23 redis-cluster]# ps -ef  grep redis</span><br><span class="line">root      27936      1  2 15:50 ?        00:02:59 redis-server *:7001 [cluster]</span><br><span class="line">root      27941      1  3 15:50 ?        00:03:27 redis-server *:7002 [cluster]</span><br><span class="line">root      27946      1  3 15:50 ?        00:03:16 redis-server *:7003 [cluster]</span><br><span class="line">root      27951      1  3 15:50 ?        00:03:22 redis-server *:7004 [cluster]</span><br><span class="line">root      27956      1  3 15:50 ?        00:03:02 redis-server *:7005 [cluster]</span><br><span class="line">root      27961      1  3 15:50 ?        00:03:07 redis-server *:7006 [cluster]</span><br><span class="line">root      27966      1  3 15:50 ?        00:03:14 redis-server *:7007 [cluster]</span><br><span class="line">root      27971      1  3 15:50 ?        00:03:07 redis-server *:7008 [cluster]</span><br><span class="line">root      27976      1  3 15:50 ?        00:03:23 redis-server *:7009 [cluster]</span><br><span class="line">root      27981      1  3 15:50 ?        00:03:17 redis-server *:7010 [cluster]</span><br><span class="line">root      27986      1  3 15:50 ?        00:03:11 redis-server *:7011 [cluster]</span><br><span class="line">root      27991      1  3 15:50 ?        00:03:12 redis-server *:7012 [cluster]</span><br><span class="line">root      27996      1  3 15:50 ?        00:03:07 redis-server *:7013 [cluster]</span><br><span class="line">root      28001      1  3 15:50 ?        00:03:08 redis-server *:7014 [cluster]</span><br><span class="line">root      28006      1  3 15:50 ?        00:03:16 redis-server *:7015 [cluster]</span><br><span class="line">root      28011      1  3 15:50 ?        00:03:10 redis-server *:7016 [cluster]</span><br><span class="line">root      28023      1  3 15:50 ?        00:03:24 redis-server *:7017 [cluster]</span><br><span class="line">root      28028      1  3 15:50 ?        00:03:02 redis-server *:7018 [cluster]</span><br><span class="line">root      28033      1  3 15:50 ?        00:03:17 redis-server *:7019 [cluster]</span><br><span class="line">root      28039      1  3 15:50 ?        00:03:16 redis-server *:7020 [cluster]</span><br><span class="line">root      28082      1  3 15:50 ?        00:03:13 redis-server *:7021 [cluster]</span><br><span class="line">root      28087      1  3 15:50 ?        00:03:33 redis-server *:7022 [cluster]</span><br><span class="line">root      28089      1  3 15:50 ?        00:03:16 redis-server *:7023 [cluster]</span><br><span class="line">root      28097      1  3 15:50 ?        00:03:18 redis-server *:7024 [cluster]</span><br><span class="line">root      28100      1  3 15:50 ?        00:03:31 redis-server *:7025 [cluster]</span><br><span class="line">root      28107      1  3 15:50 ?        00:03:03 redis-server *:7026 [cluster]</span><br><span class="line">root      28112      1  3 15:50 ?        00:03:29 redis-server *:7027 [cluster]</span><br><span class="line">root      28117      1  3 15:50 ?        00:03:12 redis-server *:7028 [cluster]</span><br><span class="line">root      28122      1  3 15:50 ?        00:03:01 redis-server *:7029 [cluster]</span><br><span class="line">root      28127      1  3 15:50 ?        00:03:09 redis-server *:7030 [cluster]</span><br><span class="line">root      28132      1  3 15:50 ?        00:03:20 redis-server *:7031 [cluster]</span><br><span class="line">root      28137      1  2 15:50 ?        00:02:52 redis-server *:7032 [cluster]</span><br><span class="line">root      28142      1  3 15:50 ?        00:03:19 redis-server *:7033 [cluster]</span><br><span class="line">root      28147      1  3 15:50 ?        00:03:13 redis-server *:7034 [cluster]</span><br><span class="line">root      28152      1  3 15:50 ?        00:03:15 redis-server *:7035 [cluster]</span><br><span class="line">root      28157      1  3 15:50 ?        00:03:09 redis-server *:7036 [cluster]</span><br><span class="line">root      28162      1  3 15:50 ?        00:03:08 redis-server *:7037 [cluster]</span><br><span class="line">root      28168      1  3 15:50 ?        00:03:12 redis-server *:7038 [cluster]</span><br><span class="line">root      28173      1  3 15:50 ?        00:03:11 redis-server *:7039 [cluster]</span><br><span class="line">root      28178      1  3 15:50 ?        00:03:20 redis-server *:7040 [cluster]</span><br><span class="line">root      28231      1  3 15:51 ?        00:03:02 redis-server *:7041 [cluster]</span><br><span class="line">root      28236      1  3 15:51 ?        00:03:18 redis-server *:7042 [cluster]</span><br><span class="line">root      28241      1  3 15:51 ?        00:03:25 redis-server *:7043 [cluster]</span><br><span class="line">root      28246      1  3 15:51 ?        00:03:19 redis-server *:7044 [cluster]</span><br><span class="line">root      28251      1  3 15:51 ?        00:03:38 redis-server *:7045 [cluster]</span><br><span class="line">root      28256      1  3 15:51 ?        00:03:31 redis-server *:7046 [cluster]</span><br><span class="line">root      28261      1  3 15:51 ?        00:03:20 redis-server *:7047 [cluster]</span><br><span class="line">root      28266      1  3 15:51 ?        00:03:29 redis-server *:7048 [cluster]</span><br><span class="line">root      28272      1  3 15:51 ?        00:03:29 redis-server *:7049 [cluster]</span><br><span class="line">root      28277      1  3 15:51 ?        00:03:05 redis-server *:7050 [cluster]</span><br><span class="line">root      28282      1  3 15:51 ?        00:03:25 redis-server *:7051 [cluster]</span><br><span class="line">root      28287      1  3 15:51 ?        00:03:01 redis-server *:7052 [cluster]</span><br><span class="line">root      28292      1  3 15:51 ?        00:03:20 redis-server *:7053 [cluster]</span><br><span class="line">root      28299      1  3 15:51 ?        00:03:03 redis-server *:7054 [cluster]</span><br><span class="line">root      28304      1  3 15:51 ?        00:03:25 redis-server *:7055 [cluster]</span><br><span class="line">root      28309      1  3 15:51 ?        00:03:15 redis-server *:7056 [cluster]</span><br><span class="line">root      28314      1  3 15:51 ?        00:03:12 redis-server *:7057 [cluster]</span><br><span class="line">root      28319      1  3 15:51 ?        00:03:11 redis-server *:7058 [cluster]</span><br><span class="line">root      28324      1  3 15:51 ?        00:03:03 redis-server *:7059 [cluster]</span><br><span class="line">root      28329      1  3 15:51 ?        00:03:03 redis-server *:7060 [cluster]</span><br><span class="line">root      28356      1  3 15:51 ?        00:03:21 redis-server *:7061 [cluster]</span><br><span class="line">root      28361      1  3 15:51 ?        00:03:15 redis-server *:7062 [cluster]</span><br><span class="line">root      28366      1  2 15:51 ?        00:02:54 redis-server *:7063 [cluster]</span><br><span class="line">root      28372      1  3 15:51 ?        00:03:02 redis-server *:7064 [cluster]</span><br><span class="line">root      28377      1  3 15:51 ?        00:03:03 redis-server *:7065 [cluster]</span><br><span class="line">root      28382      1  3 15:51 ?        00:03:15 redis-server *:7066 [cluster]</span><br><span class="line">root      28387      1  3 15:51 ?        00:03:12 redis-server *:7067 [cluster]</span><br><span class="line">root      28392      1  3 15:51 ?        00:03:16 redis-server *:7068 [cluster]</span><br><span class="line">root      28397      1  3 15:51 ?        00:03:17 redis-server *:7069 [cluster]</span><br><span class="line">root      28402      1  3 15:51 ?        00:03:28 redis-server *:7070 [cluster]</span><br><span class="line">root      41658  15689  0 17:31 pts/1    00:00:00 grep --color=auto redis</span><br></pre></td></tr></table></figure>

<h4 id="7-启动集群"><a href="#7-启动集群" class="headerlink" title="7.启动集群"></a>7.启动集群</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -a NBD --cluster create --cluster-replicas 1 10.209.17.10:7001 10.209.17.10:7002 10.209.17.10:7003 10.209.17.10:7004 10.209.17.10:7005 10.209.17.10:7006 10.209.17.10:7007 10.209.17.10:7008 10.209.17.10:7009 10.209.17.10:7010 10.209.17.10:7011 10.209.17.10:7012 10.209.17.10:7013 10.209.17.10:7014 10.209.17.10:7015 10.209.17.10:7016 10.209.17.10:7017 10.209.17.10:7018 10.209.17.10:7019 10.209.17.10:7020 10.209.17.10:7021 10.209.17.10:7022 10.209.17.10:7023 10.209.17.10:7024 10.209.17.10:7025 10.209.17.10:7026 10.209.17.10:7027 10.209.17.10:7028 10.209.17.10:7029 10.209.17.10:7030 10.209.17.10:7031 10.209.17.10:7032 10.209.17.10:7033 10.209.17.10:7034 10.209.17.10:7035 10.209.17.10:7036 10.209.17.10:7037 10.209.17.10:7038 10.209.17.10:7039 10.209.17.10:7040 10.209.17.10:7041 10.209.17.10:7042 10.209.17.10:7043 10.209.17.10:7044 10.209.17.10:7045 10.209.17.10:7046 10.209.17.10:7047 10.209.17.10:7048 10.209.17.10:7049 10.209.17.10:7050 10.209.17.10:7051 10.209.17.10:7052 10.209.17.10:7053 10.209.17.10:7054 10.209.17.10:7055 10.209.17.10:7056 10.209.17.10:7057 10.209.17.10:7058 10.209.17.10:7059 10.209.17.10:7060 10.209.17.10:7061 10.209.17.10:7062 10.209.17.10:7063 10.209.17.10:7064 10.209.17.10:7065 10.209.17.10:7066 10.209.17.10:7067 10.209.17.10:7068 10.209.17.10:7069 10.209.17.10:7070 10.209.17.101:7001 10.209.17.101:7002 10.209.17.101:7003 10.209.17.101:7004 10.209.17.101:7005 10.209.17.101:7006 10.209.17.101:7007 10.209.17.101:7008 10.209.17.101:7009 10.209.17.101:7010 10.209.17.101:7011 10.209.17.101:7012 10.209.17.101:7013 10.209.17.101:7014 10.209.17.101:7015 10.209.17.101:7016 10.209.17.101:7017 10.209.17.101:7018 10.209.17.101:7019 10.209.17.101:7020 10.209.17.101:7021 10.209.17.101:7022 10.209.17.101:7023 10.209.17.101:7024 10.209.17.101:7025 10.209.17.101:7026 10.209.17.101:7027 10.209.17.101:7028 10.209.17.101:7029 10.209.17.101:7030 10.209.17.101:7031 10.209.17.101:7032 10.209.17.101:7033 10.209.17.101:7034 10.209.17.101:7035 10.209.17.101:7036 10.209.17.101:7037 10.209.17.101:7038 10.209.17.101:7039 10.209.17.101:7040 10.209.17.101:7041 10.209.17.101:7042 10.209.17.101:7043 10.209.17.101:7044 10.209.17.101:7045 10.209.17.101:7046 10.209.17.101:7047 10.209.17.101:7048 10.209.17.101:7049 10.209.17.101:7050 10.209.17.101:7051 10.209.17.101:7052 10.209.17.101:7053 10.209.17.101:7054 10.209.17.101:7055 10.209.17.101:7056 10.209.17.101:7057 10.209.17.101:7058 10.209.17.101:7059 10.209.17.101:7060 10.209.17.101:7061 10.209.17.101:7062 10.209.17.101:7063 10.209.17.101:7064 10.209.17.101:7065 10.209.17.101:7066 10.209.17.101:7067 10.209.17.101:7068 10.209.17.101:7069 10.209.17.101:7070 10.209.17.103:7001 10.209.17.103:7002 10.209.17.103:7003 10.209.17.103:7004 10.209.17.103:7005 10.209.17.103:7006 10.209.17.103:7007 10.209.17.103:7008 10.209.17.103:7009 10.209.17.103:7010 10.209.17.103:7011 10.209.17.103:7012 10.209.17.103:7013 10.209.17.103:7014 10.209.17.103:7015 10.209.17.103:7016 10.209.17.103:7017 10.209.17.103:7018 10.209.17.103:7019 10.209.17.103:7020 10.209.17.103:7021 10.209.17.103:7022 10.209.17.103:7023 10.209.17.103:7024 10.209.17.103:7025 10.209.17.103:7026 10.209.17.103:7027 10.209.17.103:7028 10.209.17.103:7029 10.209.17.103:7030 10.209.17.103:7031 10.209.17.103:7032 10.209.17.103:7033 10.209.17.103:7034 10.209.17.103:7035 10.209.17.103:7036 10.209.17.103:7037 10.209.17.103:7038 10.209.17.103:7039 10.209.17.103:7040 10.209.17.103:7041 10.209.17.103:7042 10.209.17.103:7043 10.209.17.103:7044 10.209.17.103:7045 10.209.17.103:7046 10.209.17.103:7047 10.209.17.103:7048 10.209.17.103:7049 10.209.17.103:7050 10.209.17.103:7051 10.209.17.103:7052 10.209.17.103:7053 10.209.17.103:7054 10.209.17.103:7055 10.209.17.103:7056 10.209.17.103:7057 10.209.17.103:7058 10.209.17.103:7059 10.209.17.103:7060 10.209.17.103:7061 10.209.17.103:7062 10.209.17.103:7063 10.209.17.103:7064 10.209.17.103:7065 10.209.17.103:7066 10.209.17.103:7067 10.209.17.103:7068 10.209.17.103:7069 10.209.17.103:7070 10.209.17.105:7001 10.209.17.105:7002 10.209.17.105:7003 10.209.17.105:7004 10.209.17.105:7005 10.209.17.105:7006 10.209.17.105:7007 10.209.17.105:7008 10.209.17.105:7009 10.209.17.105:7010 10.209.17.105:7011 10.209.17.105:7012 10.209.17.105:7013 10.209.17.105:7014 10.209.17.105:7015 10.209.17.105:7016 10.209.17.105:7017 10.209.17.105:7018 10.209.17.105:7019 10.209.17.105:7020 10.209.17.105:7021 10.209.17.105:7022 10.209.17.105:7023 10.209.17.105:7024 10.209.17.105:7025 10.209.17.105:7026 10.209.17.105:7027 10.209.17.105:7028 10.209.17.105:7029 10.209.17.105:7030 10.209.17.105:7031 10.209.17.105:7032 10.209.17.105:7033 10.209.17.105:7034 10.209.17.105:7035 10.209.17.105:7036 10.209.17.105:7037 10.209.17.105:7038 10.209.17.105:7039 10.209.17.105:7040 10.209.17.105:7041 10.209.17.105:7042 10.209.17.105:7043 10.209.17.105:7044 10.209.17.105:7045 10.209.17.105:7046 10.209.17.105:7047 10.209.17.105:7048 10.209.17.105:7049 10.209.17.105:7050 10.209.17.105:7051 10.209.17.105:7052 10.209.17.105:7053 10.209.17.105:7054 10.209.17.105:7055 10.209.17.105:7056 10.209.17.105:7057 10.209.17.105:7058 10.209.17.105:7059 10.209.17.105:7060 10.209.17.105:7061 10.209.17.105:7062 10.209.17.105:7063 10.209.17.105:7064 10.209.17.105:7065 10.209.17.105:7066 10.209.17.105:7067 10.209.17.105:7068 10.209.17.105:7069 10.209.17.105:7070 10.209.17.106:7001 10.209.17.106:7002 10.209.17.106:7003 10.209.17.106:7004 10.209.17.106:7005 10.209.17.106:7006 10.209.17.106:7007 10.209.17.106:7008 10.209.17.106:7009 10.209.17.106:7010 10.209.17.106:7011 10.209.17.106:7012 10.209.17.106:7013 10.209.17.106:7014 10.209.17.106:7015 10.209.17.106:7016 10.209.17.106:7017 10.209.17.106:7018 10.209.17.106:7019 10.209.17.106:7020 10.209.17.106:7021 10.209.17.106:7022 10.209.17.106:7023 10.209.17.106:7024 10.209.17.106:7025 10.209.17.106:7026 10.209.17.106:7027 10.209.17.106:7028 10.209.17.106:7029 10.209.17.106:7030 10.209.17.106:7031 10.209.17.106:7032 10.209.17.106:7033 10.209.17.106:7034 10.209.17.106:7035 10.209.17.106:7036 10.209.17.106:7037 10.209.17.106:7038 10.209.17.106:7039 10.209.17.106:7040 10.209.17.106:7041 10.209.17.106:7042 10.209.17.106:7043 10.209.17.106:7044 10.209.17.106:7045 10.209.17.106:7046 10.209.17.106:7047 10.209.17.106:7048 10.209.17.106:7049 10.209.17.106:7050 10.209.17.106:7051 10.209.17.106:7052 10.209.17.106:7053 10.209.17.106:7054 10.209.17.106:7055 10.209.17.106:7056 10.209.17.106:7057 10.209.17.106:7058 10.209.17.106:7059 10.209.17.106:7060 10.209.17.106:7061 10.209.17.106:7062 10.209.17.106:7063 10.209.17.106:7064 10.209.17.106:7065 10.209.17.106:7066 10.209.17.106:7067 10.209.17.106:7068 10.209.17.106:7069 10.209.17.106:7070 10.209.17.11:7001 10.209.17.11:7002 10.209.17.11:7003 10.209.17.11:7004 10.209.17.11:7005 10.209.17.11:7006 10.209.17.11:7007 10.209.17.11:7008 10.209.17.11:7009 10.209.17.11:7010 10.209.17.11:7011 10.209.17.11:7012 10.209.17.11:7013 10.209.17.11:7014 10.209.17.11:7015 10.209.17.11:7016 10.209.17.11:7017 10.209.17.11:7018 10.209.17.11:7019 10.209.17.11:7020 10.209.17.11:7021 10.209.17.11:7022 10.209.17.11:7023 10.209.17.11:7024 10.209.17.11:7025 10.209.17.11:7026 10.209.17.11:7027 10.209.17.11:7028 10.209.17.11:7029 10.209.17.11:7030 10.209.17.11:7031 10.209.17.11:7032 10.209.17.11:7033 10.209.17.11:7034 10.209.17.11:7035 10.209.17.11:7036 10.209.17.11:7037 10.209.17.11:7038 10.209.17.11:7039 10.209.17.11:7040 10.209.17.11:7041 10.209.17.11:7042 10.209.17.11:7043 10.209.17.11:7044 10.209.17.11:7045 10.209.17.11:7046 10.209.17.11:7047 10.209.17.11:7048 10.209.17.11:7049 10.209.17.11:7050 10.209.17.11:7051 10.209.17.11:7052 10.209.17.11:7053 10.209.17.11:7054 10.209.17.11:7055 10.209.17.11:7056 10.209.17.11:7057 10.209.17.11:7058 10.209.17.11:7059 10.209.17.11:7060 10.209.17.11:7061 10.209.17.11:7062 10.209.17.11:7063 10.209.17.11:7064 10.209.17.11:7065 10.209.17.11:7066 10.209.17.11:7067 10.209.17.11:7068 10.209.17.11:7069 10.209.17.11:7070 10.209.17.110:7001 10.209.17.110:7002 10.209.17.110:7003 10.209.17.110:7004 10.209.17.110:7005 10.209.17.110:7006 10.209.17.110:7007 10.209.17.110:7008 10.209.17.110:7009 10.209.17.110:7010 10.209.17.110:7011 10.209.17.110:7012 10.209.17.110:7013 10.209.17.110:7014 10.209.17.110:7015 10.209.17.110:7016 10.209.17.110:7017 10.209.17.110:7018 10.209.17.110:7019 10.209.17.110:7020 10.209.17.110:7021 10.209.17.110:7022 10.209.17.110:7023 10.209.17.110:7024 10.209.17.110:7025 10.209.17.110:7026 10.209.17.110:7027 10.209.17.110:7028 10.209.17.110:7029 10.209.17.110:7030 10.209.17.110:7031 10.209.17.110:7032 10.209.17.110:7033 10.209.17.110:7034 10.209.17.110:7035 10.209.17.110:7036 10.209.17.110:7037 10.209.17.110:7038 10.209.17.110:7039 10.209.17.110:7040 10.209.17.110:7041 10.209.17.110:7042 10.209.17.110:7043 10.209.17.110:7044 10.209.17.110:7045 10.209.17.110:7046 10.209.17.110:7047 10.209.17.110:7048 10.209.17.110:7049 10.209.17.110:7050 10.209.17.110:7051 10.209.17.110:7052 10.209.17.110:7053 10.209.17.110:7054 10.209.17.110:7055 10.209.17.110:7056 10.209.17.110:7057 10.209.17.110:7058 10.209.17.110:7059 10.209.17.110:7060 10.209.17.110:7061 10.209.17.110:7062 10.209.17.110:7063 10.209.17.110:7064 10.209.17.110:7065 10.209.17.110:7066 10.209.17.110:7067 10.209.17.110:7068 10.209.17.110:7069 10.209.17.110:7070 10.209.17.117:7001 10.209.17.117:7002 10.209.17.117:7003 10.209.17.117:7004 10.209.17.117:7005 10.209.17.117:7006 10.209.17.117:7007 10.209.17.117:7008 10.209.17.117:7009 10.209.17.117:7010 10.209.17.117:7011 10.209.17.117:7012 10.209.17.117:7013 10.209.17.117:7014 10.209.17.117:7015 10.209.17.117:7016 10.209.17.117:7017 10.209.17.117:7018 10.209.17.117:7019 10.209.17.117:7020 10.209.17.117:7021 10.209.17.117:7022 10.209.17.117:7023 10.209.17.117:7024 10.209.17.117:7025 10.209.17.117:7026 10.209.17.117:7027 10.209.17.117:7028 10.209.17.117:7029 10.209.17.117:7030 10.209.17.117:7031 10.209.17.117:7032 10.209.17.117:7033 10.209.17.117:7034 10.209.17.117:7035 10.209.17.117:7036 10.209.17.117:7037 10.209.17.117:7038 10.209.17.117:7039 10.209.17.117:7040 10.209.17.117:7041 10.209.17.117:7042 10.209.17.117:7043 10.209.17.117:7044 10.209.17.117:7045 10.209.17.117:7046 10.209.17.117:7047 10.209.17.117:7048 10.209.17.117:7049 10.209.17.117:7050 10.209.17.117:7051 10.209.17.117:7052 10.209.17.117:7053 10.209.17.117:7054 10.209.17.117:7055 10.209.17.117:7056 10.209.17.117:7057 10.209.17.117:7058 10.209.17.117:7059 10.209.17.117:7060 10.209.17.117:7061 10.209.17.117:7062 10.209.17.117:7063 10.209.17.117:7064 10.209.17.117:7065 10.209.17.117:7066 10.209.17.117:7067 10.209.17.117:7068 10.209.17.117:7069 10.209.17.117:7070 10.209.17.12:7001 10.209.17.12:7002 10.209.17.12:7003 10.209.17.12:7004 10.209.17.12:7005 10.209.17.12:7006 10.209.17.12:7007 10.209.17.12:7008 10.209.17.12:7009 10.209.17.12:7010 10.209.17.12:7011 10.209.17.12:7012 10.209.17.12:7013 10.209.17.12:7014 10.209.17.12:7015 10.209.17.12:7016 10.209.17.12:7017 10.209.17.12:7018 10.209.17.12:7019 10.209.17.12:7020 10.209.17.12:7021 10.209.17.12:7022 10.209.17.12:7023 10.209.17.12:7024 10.209.17.12:7025 10.209.17.12:7026 10.209.17.12:7027 10.209.17.12:7028 10.209.17.12:7029 10.209.17.12:7030 10.209.17.12:7031 10.209.17.12:7032 10.209.17.12:7033 10.209.17.12:7034 10.209.17.12:7035 10.209.17.12:7036 10.209.17.12:7037 10.209.17.12:7038 10.209.17.12:7039 10.209.17.12:7040 10.209.17.12:7041 10.209.17.12:7042 10.209.17.12:7043 10.209.17.12:7044 10.209.17.12:7045 10.209.17.12:7046 10.209.17.12:7047 10.209.17.12:7048 10.209.17.12:7049 10.209.17.12:7050 10.209.17.12:7051 10.209.17.12:7052 10.209.17.12:7053 10.209.17.12:7054 10.209.17.12:7055 10.209.17.12:7056 10.209.17.12:7057 10.209.17.12:7058 10.209.17.12:7059 10.209.17.12:7060 10.209.17.12:7061 10.209.17.12:7062 10.209.17.12:7063 10.209.17.12:7064 10.209.17.12:7065 10.209.17.12:7066 10.209.17.12:7067 10.209.17.12:7068 10.209.17.12:7069 10.209.17.12:7070 10.209.17.122:7001 10.209.17.122:7002 10.209.17.122:7003 10.209.17.122:7004 10.209.17.122:7005 10.209.17.122:7006 10.209.17.122:7007 10.209.17.122:7008 10.209.17.122:7009 10.209.17.122:7010 10.209.17.122:7011 10.209.17.122:7012 10.209.17.122:7013 10.209.17.122:7014 10.209.17.122:7015 10.209.17.122:7016 10.209.17.122:7017 10.209.17.122:7018 10.209.17.122:7019 10.209.17.122:7020 10.209.17.122:7021 10.209.17.122:7022 10.209.17.122:7023 10.209.17.122:7024 10.209.17.122:7025 10.209.17.122:7026 10.209.17.122:7027 10.209.17.122:7028 10.209.17.122:7029 10.209.17.122:7030 10.209.17.122:7031 10.209.17.122:7032 10.209.17.122:7033 10.209.17.122:7034 10.209.17.122:7035 10.209.17.122:7036 10.209.17.122:7037 10.209.17.122:7038 10.209.17.122:7039 10.209.17.122:7040 10.209.17.122:7041 10.209.17.122:7042 10.209.17.122:7043 10.209.17.122:7044 10.209.17.122:7045 10.209.17.122:7046 10.209.17.122:7047 10.209.17.122:7048 10.209.17.122:7049 10.209.17.122:7050 10.209.17.122:7051 10.209.17.122:7052 10.209.17.122:7053 10.209.17.122:7054 10.209.17.122:7055 10.209.17.122:7056 10.209.17.122:7057 10.209.17.122:7058 10.209.17.122:7059 10.209.17.122:7060 10.209.17.122:7061 10.209.17.122:7062 10.209.17.122:7063 10.209.17.122:7064 10.209.17.122:7065 10.209.17.122:7066 10.209.17.122:7067 10.209.17.122:7068 10.209.17.122:7069 10.209.17.122:7070 10.209.17.13:7001 10.209.17.13:7002 10.209.17.13:7003 10.209.17.13:7004 10.209.17.13:7005 10.209.17.13:7006 10.209.17.13:7007 10.209.17.13:7008 10.209.17.13:7009 10.209.17.13:7010 10.209.17.13:7011 10.209.17.13:7012 10.209.17.13:7013 10.209.17.13:7014 10.209.17.13:7015 10.209.17.13:7016 10.209.17.13:7017 10.209.17.13:7018 10.209.17.13:7019 10.209.17.13:7020 10.209.17.13:7021 10.209.17.13:7022 10.209.17.13:7023 10.209.17.13:7024 10.209.17.13:7025 10.209.17.13:7026 10.209.17.13:7027 10.209.17.13:7028 10.209.17.13:7029 10.209.17.13:7030 10.209.17.13:7031 10.209.17.13:7032 10.209.17.13:7033 10.209.17.13:7034 10.209.17.13:7035 10.209.17.13:7036 10.209.17.13:7037 10.209.17.13:7038 10.209.17.13:7039 10.209.17.13:7040 10.209.17.13:7041 10.209.17.13:7042 10.209.17.13:7043 10.209.17.13:7044 10.209.17.13:7045 10.209.17.13:7046 10.209.17.13:7047 10.209.17.13:7048 10.209.17.13:7049 10.209.17.13:7050 10.209.17.13:7051 10.209.17.13:7052 10.209.17.13:7053 10.209.17.13:7054 10.209.17.13:7055 10.209.17.13:7056 10.209.17.13:7057 10.209.17.13:7058 10.209.17.13:7059 10.209.17.13:7060 10.209.17.13:7061 10.209.17.13:7062 10.209.17.13:7063 10.209.17.13:7064 10.209.17.13:7065 10.209.17.13:7066 10.209.17.13:7067 10.209.17.13:7068 10.209.17.13:7069 10.209.17.13:7070 10.209.17.14:7001 10.209.17.14:7002 10.209.17.14:7003 10.209.17.14:7004 10.209.17.14:7005 10.209.17.14:7006 10.209.17.14:7007 10.209.17.14:7008 10.209.17.14:7009 10.209.17.14:7010 10.209.17.14:7011 10.209.17.14:7012 10.209.17.14:7013 10.209.17.14:7014 10.209.17.14:7015 10.209.17.14:7016 10.209.17.14:7017 10.209.17.14:7018 10.209.17.14:7019 10.209.17.14:7020 10.209.17.14:7021 10.209.17.14:7022 10.209.17.14:7023 10.209.17.14:7024 10.209.17.14:7025 10.209.17.14:7026 10.209.17.14:7027 10.209.17.14:7028 10.209.17.14:7029 10.209.17.14:7030 10.209.17.14:7031 10.209.17.14:7032 10.209.17.14:7033 10.209.17.14:7034 10.209.17.14:7035 10.209.17.14:7036 10.209.17.14:7037 10.209.17.14:7038 10.209.17.14:7039 10.209.17.14:7040 10.209.17.14:7041 10.209.17.14:7042 10.209.17.14:7043 10.209.17.14:7044 10.209.17.14:7045 10.209.17.14:7046 10.209.17.14:7047 10.209.17.14:7048 10.209.17.14:7049 10.209.17.14:7050 10.209.17.14:7051 10.209.17.14:7052 10.209.17.14:7053 10.209.17.14:7054 10.209.17.14:7055 10.209.17.14:7056 10.209.17.14:7057 10.209.17.14:7058 10.209.17.14:7059 10.209.17.14:7060 10.209.17.14:7061 10.209.17.14:7062 10.209.17.14:7063 10.209.17.14:7064 10.209.17.14:7065 10.209.17.14:7066 10.209.17.14:7067 10.209.17.14:7068 10.209.17.14:7069 10.209.17.14:7070 10.209.17.15:7001 10.209.17.15:7002 10.209.17.15:7003 10.209.17.15:7004 10.209.17.15:7005 10.209.17.15:7006 10.209.17.15:7007 10.209.17.15:7008 10.209.17.15:7009 10.209.17.15:7010 10.209.17.15:7011 10.209.17.15:7012 10.209.17.15:7013 10.209.17.15:7014 10.209.17.15:7015 10.209.17.15:7016 10.209.17.15:7017 10.209.17.15:7018 10.209.17.15:7019 10.209.17.15:7020 10.209.17.15:7021 10.209.17.15:7022 10.209.17.15:7023 10.209.17.15:7024 10.209.17.15:7025 10.209.17.15:7026 10.209.17.15:7027 10.209.17.15:7028 10.209.17.15:7029 10.209.17.15:7030 10.209.17.15:7031 10.209.17.15:7032 10.209.17.15:7033 10.209.17.15:7034 10.209.17.15:7035 10.209.17.15:7036 10.209.17.15:7037 10.209.17.15:7038 10.209.17.15:7039 10.209.17.15:7040 10.209.17.15:7041 10.209.17.15:7042 10.209.17.15:7043 10.209.17.15:7044 10.209.17.15:7045 10.209.17.15:7046 10.209.17.15:7047 10.209.17.15:7048 10.209.17.15:7049 10.209.17.15:7050 10.209.17.15:7051 10.209.17.15:7052 10.209.17.15:7053 10.209.17.15:7054 10.209.17.15:7055 10.209.17.15:7056 10.209.17.15:7057 10.209.17.15:7058 10.209.17.15:7059 10.209.17.15:7060 10.209.17.15:7061 10.209.17.15:7062 10.209.17.15:7063 10.209.17.15:7064 10.209.17.15:7065 10.209.17.15:7066 10.209.17.15:7067 10.209.17.15:7068 10.209.17.15:7069 10.209.17.15:7070 10.209.17.16:7001 10.209.17.16:7002 10.209.17.16:7003 10.209.17.16:7004 10.209.17.16:7005 10.209.17.16:7006 10.209.17.16:7007 10.209.17.16:7008 10.209.17.16:7009 10.209.17.16:7010 10.209.17.16:7011 10.209.17.16:7012 10.209.17.16:7013 10.209.17.16:7014 10.209.17.16:7015 10.209.17.16:7016 10.209.17.16:7017 10.209.17.16:7018 10.209.17.16:7019 10.209.17.16:7020 10.209.17.16:7021 10.209.17.16:7022 10.209.17.16:7023 10.209.17.16:7024 10.209.17.16:7025 10.209.17.16:7026 10.209.17.16:7027 10.209.17.16:7028 10.209.17.16:7029 10.209.17.16:7030 10.209.17.16:7031 10.209.17.16:7032 10.209.17.16:7033 10.209.17.16:7034 10.209.17.16:7035 10.209.17.16:7036 10.209.17.16:7037 10.209.17.16:7038 10.209.17.16:7039 10.209.17.16:7040 10.209.17.16:7041 10.209.17.16:7042 10.209.17.16:7043 10.209.17.16:7044 10.209.17.16:7045 10.209.17.16:7046 10.209.17.16:7047 10.209.17.16:7048 10.209.17.16:7049 10.209.17.16:7050 10.209.17.16:7051 10.209.17.16:7052 10.209.17.16:7053 10.209.17.16:7054 10.209.17.16:7055 10.209.17.16:7056 10.209.17.16:7057 10.209.17.16:7058 10.209.17.16:7059 10.209.17.16:7060 10.209.17.16:7061 10.209.17.16:7062 10.209.17.16:7063 10.209.17.16:7064 10.209.17.16:7065 10.209.17.16:7066 10.209.17.16:7067 10.209.17.16:7068 10.209.17.16:7069 10.209.17.16:7070 10.209.17.17:7001 10.209.17.17:7002 10.209.17.17:7003 10.209.17.17:7004 10.209.17.17:7005 10.209.17.17:7006 10.209.17.17:7007 10.209.17.17:7008 10.209.17.17:7009 10.209.17.17:7010 10.209.17.17:7011 10.209.17.17:7012 10.209.17.17:7013 10.209.17.17:7014 10.209.17.17:7015 10.209.17.17:7016 10.209.17.17:7017 10.209.17.17:7018 10.209.17.17:7019 10.209.17.17:7020 10.209.17.17:7021 10.209.17.17:7022 10.209.17.17:7023 10.209.17.17:7024 10.209.17.17:7025 10.209.17.17:7026 10.209.17.17:7027 10.209.17.17:7028 10.209.17.17:7029 10.209.17.17:7030 10.209.17.17:7031 10.209.17.17:7032 10.209.17.17:7033 10.209.17.17:7034 10.209.17.17:7035 10.209.17.17:7036 10.209.17.17:7037 10.209.17.17:7038 10.209.17.17:7039 10.209.17.17:7040 10.209.17.17:7041 10.209.17.17:7042 10.209.17.17:7043 10.209.17.17:7044 10.209.17.17:7045 10.209.17.17:7046 10.209.17.17:7047 10.209.17.17:7048 10.209.17.17:7049 10.209.17.17:7050 10.209.17.17:7051 10.209.17.17:7052 10.209.17.17:7053 10.209.17.17:7054 10.209.17.17:7055 10.209.17.17:7056 10.209.17.17:7057 10.209.17.17:7058 10.209.17.17:7059 10.209.17.17:7060 10.209.17.17:7061 10.209.17.17:7062 10.209.17.17:7063 10.209.17.17:7064 10.209.17.17:7065 10.209.17.17:7066 10.209.17.17:7067 10.209.17.17:7068 10.209.17.17:7069 10.209.17.17:7070 10.209.17.18:7001 10.209.17.18:7002 10.209.17.18:7003 10.209.17.18:7004 10.209.17.18:7005 10.209.17.18:7006 10.209.17.18:7007 10.209.17.18:7008 10.209.17.18:7009 10.209.17.18:7010 10.209.17.18:7011 10.209.17.18:7012 10.209.17.18:7013 10.209.17.18:7014 10.209.17.18:7015 10.209.17.18:7016 10.209.17.18:7017 10.209.17.18:7018 10.209.17.18:7019 10.209.17.18:7020 10.209.17.18:7021 10.209.17.18:7022 10.209.17.18:7023 10.209.17.18:7024 10.209.17.18:7025 10.209.17.18:7026 10.209.17.18:7027 10.209.17.18:7028 10.209.17.18:7029 10.209.17.18:7030 10.209.17.18:7031 10.209.17.18:7032 10.209.17.18:7033 10.209.17.18:7034 10.209.17.18:7035 10.209.17.18:7036 10.209.17.18:7037 10.209.17.18:7038 10.209.17.18:7039 10.209.17.18:7040 10.209.17.18:7041 10.209.17.18:7042 10.209.17.18:7043 10.209.17.18:7044 10.209.17.18:7045 10.209.17.18:7046 10.209.17.18:7047 10.209.17.18:7048 10.209.17.18:7049 10.209.17.18:7050 10.209.17.18:7051 10.209.17.18:7052 10.209.17.18:7053 10.209.17.18:7054 10.209.17.18:7055 10.209.17.18:7056 10.209.17.18:7057 10.209.17.18:7058 10.209.17.18:7059 10.209.17.18:7060 10.209.17.18:7061 10.209.17.18:7062 10.209.17.18:7063 10.209.17.18:7064 10.209.17.18:7065 10.209.17.18:7066 10.209.17.18:7067 10.209.17.18:7068 10.209.17.18:7069 10.209.17.18:7070 10.209.17.19:7001 10.209.17.19:7002 10.209.17.19:7003 10.209.17.19:7004 10.209.17.19:7005 10.209.17.19:7006 10.209.17.19:7007 10.209.17.19:7008 10.209.17.19:7009 10.209.17.19:7010 10.209.17.19:7011 10.209.17.19:7012 10.209.17.19:7013 10.209.17.19:7014 10.209.17.19:7015 10.209.17.19:7016 10.209.17.19:7017 10.209.17.19:7018 10.209.17.19:7019 10.209.17.19:7020 10.209.17.19:7021 10.209.17.19:7022 10.209.17.19:7023 10.209.17.19:7024 10.209.17.19:7025 10.209.17.19:7026 10.209.17.19:7027 10.209.17.19:7028 10.209.17.19:7029 10.209.17.19:7030 10.209.17.19:7031 10.209.17.19:7032 10.209.17.19:7033 10.209.17.19:7034 10.209.17.19:7035 10.209.17.19:7036 10.209.17.19:7037 10.209.17.19:7038 10.209.17.19:7039 10.209.17.19:7040 10.209.17.19:7041 10.209.17.19:7042 10.209.17.19:7043 10.209.17.19:7044 10.209.17.19:7045 10.209.17.19:7046 10.209.17.19:7047 10.209.17.19:7048 10.209.17.19:7049 10.209.17.19:7050 10.209.17.19:7051 10.209.17.19:7052 10.209.17.19:7053 10.209.17.19:7054 10.209.17.19:7055 10.209.17.19:7056 10.209.17.19:7057 10.209.17.19:7058 10.209.17.19:7059 10.209.17.19:7060 10.209.17.19:7061 10.209.17.19:7062 10.209.17.19:7063 10.209.17.19:7064 10.209.17.19:7065 10.209.17.19:7066 10.209.17.19:7067 10.209.17.19:7068 10.209.17.19:7069 10.209.17.19:7070 10.209.17.2:7001 10.209.17.2:7002 10.209.17.2:7003 10.209.17.2:7004 10.209.17.2:7005 10.209.17.2:7006 10.209.17.2:7007 10.209.17.2:7008 10.209.17.2:7009 10.209.17.2:7010 10.209.17.2:7011 10.209.17.2:7012 10.209.17.2:7013 10.209.17.2:7014 10.209.17.2:7015 10.209.17.2:7016 10.209.17.2:7017 10.209.17.2:7018 10.209.17.2:7019 10.209.17.2:7020 10.209.17.2:7021 10.209.17.2:7022 10.209.17.2:7023 10.209.17.2:7024 10.209.17.2:7025 10.209.17.2:7026 10.209.17.2:7027 10.209.17.2:7028 10.209.17.2:7029 10.209.17.2:7030 10.209.17.2:7031 10.209.17.2:7032 10.209.17.2:7033 10.209.17.2:7034 10.209.17.2:7035 10.209.17.2:7036 10.209.17.2:7037 10.209.17.2:7038 10.209.17.2:7039 10.209.17.2:7040 10.209.17.2:7041 10.209.17.2:7042 10.209.17.2:7043 10.209.17.2:7044 10.209.17.2:7045 10.209.17.2:7046 10.209.17.2:7047 10.209.17.2:7048 10.209.17.2:7049 10.209.17.2:7050 10.209.17.2:7051 10.209.17.2:7052 10.209.17.2:7053 10.209.17.2:7054 10.209.17.2:7055 10.209.17.2:7056 10.209.17.2:7057 10.209.17.2:7058 10.209.17.2:7059 10.209.17.2:7060 10.209.17.2:7061 10.209.17.2:7062 10.209.17.2:7063 10.209.17.2:7064 10.209.17.2:7065 10.209.17.2:7066 10.209.17.2:7067 10.209.17.2:7068 10.209.17.2:7069 10.209.17.2:7070 10.209.17.20:7001 10.209.17.20:7002 10.209.17.20:7003 10.209.17.20:7004 10.209.17.20:7005 10.209.17.20:7006 10.209.17.20:7007 10.209.17.20:7008 10.209.17.20:7009 10.209.17.20:7010 10.209.17.20:7011 10.209.17.20:7012 10.209.17.20:7013 10.209.17.20:7014 10.209.17.20:7015 10.209.17.20:7016 10.209.17.20:7017 10.209.17.20:7018 10.209.17.20:7019 10.209.17.20:7020 10.209.17.20:7021 10.209.17.20:7022 10.209.17.20:7023 10.209.17.20:7024 10.209.17.20:7025 10.209.17.20:7026 10.209.17.20:7027 10.209.17.20:7028 10.209.17.20:7029 10.209.17.20:7030 10.209.17.20:7031 10.209.17.20:7032 10.209.17.20:7033 10.209.17.20:7034 10.209.17.20:7035 10.209.17.20:7036 10.209.17.20:7037 10.209.17.20:7038 10.209.17.20:7039 10.209.17.20:7040 10.209.17.20:7041 10.209.17.20:7042 10.209.17.20:7043 10.209.17.20:7044 10.209.17.20:7045 10.209.17.20:7046 10.209.17.20:7047 10.209.17.20:7048 10.209.17.20:7049 10.209.17.20:7050 10.209.17.20:7051 10.209.17.20:7052 10.209.17.20:7053 10.209.17.20:7054 10.209.17.20:7055 10.209.17.20:7056 10.209.17.20:7057 10.209.17.20:7058 10.209.17.20:7059 10.209.17.20:7060 10.209.17.20:7061 10.209.17.20:7062 10.209.17.20:7063 10.209.17.20:7064 10.209.17.20:7065 10.209.17.20:7066 10.209.17.20:7067 10.209.17.20:7068 10.209.17.20:7069 10.209.17.20:7070 10.209.17.21:7001 10.209.17.21:7002 10.209.17.21:7003 10.209.17.21:7004 10.209.17.21:7005 10.209.17.21:7006 10.209.17.21:7007 10.209.17.21:7008 10.209.17.21:7009 10.209.17.21:7010 10.209.17.21:7011 10.209.17.21:7012 10.209.17.21:7013 10.209.17.21:7014 10.209.17.21:7015 10.209.17.21:7016 10.209.17.21:7017 10.209.17.21:7018 10.209.17.21:7019 10.209.17.21:7020 10.209.17.21:7021 10.209.17.21:7022 10.209.17.21:7023 10.209.17.21:7024 10.209.17.21:7025 10.209.17.21:7026 10.209.17.21:7027 10.209.17.21:7028 10.209.17.21:7029 10.209.17.21:7030 10.209.17.21:7031 10.209.17.21:7032 10.209.17.21:7033 10.209.17.21:7034 10.209.17.21:7035 10.209.17.21:7036 10.209.17.21:7037 10.209.17.21:7038 10.209.17.21:7039 10.209.17.21:7040 10.209.17.21:7041 10.209.17.21:7042 10.209.17.21:7043 10.209.17.21:7044 10.209.17.21:7045 10.209.17.21:7046 10.209.17.21:7047 10.209.17.21:7048 10.209.17.21:7049 10.209.17.21:7050 10.209.17.21:7051 10.209.17.21:7052 10.209.17.21:7053 10.209.17.21:7054 10.209.17.21:7055 10.209.17.21:7056 10.209.17.21:7057 10.209.17.21:7058 10.209.17.21:7059 10.209.17.21:7060 10.209.17.21:7061 10.209.17.21:7062 10.209.17.21:7063 10.209.17.21:7064 10.209.17.21:7065 10.209.17.21:7066 10.209.17.21:7067 10.209.17.21:7068 10.209.17.21:7069 10.209.17.21:7070</span><br></pre></td></tr></table></figure>

<p>系统会给出一个集群的预分配方案，没有问题，直接yes，继续操作。</p>
<blockquote>
<p>重置集群的方式是在每个节点上个执行<code>cluster reset</code>，然后重新创建集群. 如果加了密码，那么创建集群时就需要加-a NBD参数 不然会报以下错误:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[ERR] Node 10.209.17.10:7001 NOAUTH Authentication required.</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="8-查看集群信息并且验证"><a href="#8-查看集群信息并且验证" class="headerlink" title="8.查看集群信息并且验证"></a>8.查看集群信息并且验证</h4><p>因为节点太多所以显示不全：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@wzy-cloud redis_cluster]# redis-cli -c -p 7001</span><br><span class="line">127.0.0.1:7001&gt; auth NBD</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:7001&gt; cluster nodes</span><br><span class="line">....</span><br><span class="line">efc817d0ac1c618cac2488e6b0d0b1dc2aa3ff9e 10.209.17.13:7051@17051 slave c0b20d79a24b7ddc92d9c57841630443e4fd3d3a 0 1616142660000 751 connected</span><br><span class="line">259c1bd8c636b591ddb20449d2a6597a96da71d3 10.209.17.18:7015@17015 master - 0 1616142661000 1065 connected 6905-6927</span><br><span class="line">11c304110820055891f6edbcf6f3014a7615626d 10.209.17.13:7010@17010 master - 0 1616142660000 710 connected 4447-4469</span><br><span class="line">0d19121bc7c131d62456bab5f4baea343bb20b2e 10.209.17.117:7061@17061 slave 512899081690267e773eb3e25e0013442555c735 0 1616142659000 551 connected</span><br><span class="line">b52b6d0b19604ff6b6fd4592659182651ebbec00 10.209.17.2:7014@17014 master - 0 1616142660000 1204 connected 6483-6506</span><br><span class="line">e71b0002c2744cd4a7718f088e9fb663994037f5 10.209.17.2:7033@17033 master - 0 1616142658000 1223 connected 15377-15400</span><br><span class="line">f11c898127be2107941eab0913ec394f6cbee5ca 10.209.17.20:7059@17059 slave 9139ffe08bde8e077ed741e3da49d497a9937541 0 1616142659000 1319 connected</span><br><span class="line">0c4bcd830ab65a3bee615e280594f93d1f8294bf 10.209.17.18:7063@17063 slave 65bd7c5e63a9e95c2fa0d627941543330cb3824c 0 1616142659000 1113 connected</span><br><span class="line">3e35ac8a0f49ef6ca05c29612cf2886d72eaa2de 10.209.17.20:7023@17023 master - 0 1616142660000 1283 connected 10720-10742</span><br><span class="line">127.0.0.1:7001&gt; set name hcxt_test</span><br><span class="line">-&gt; Redirected to slot [5798] located at 10.209.17.117:7013</span><br><span class="line">(error) NOAUTH Authentication required.</span><br><span class="line">10.209.17.117:7013&gt; auth NBD</span><br><span class="line">OK</span><br><span class="line">10.209.17.117:7013&gt; set name hcxt_test</span><br><span class="line">OK</span><br><span class="line">10.209.17.117:7013&gt; get name</span><br><span class="line">&quot;hcxt_test&quot;</span><br><span class="line">10.209.17.117:7013&gt; </span><br></pre></td></tr></table></figure>

<h4 id="6-Redis的三种启动方式、停止"><a href="#6-Redis的三种启动方式、停止" class="headerlink" title="6.Redis的三种启动方式、停止"></a>6.Redis的三种启动方式、停止</h4><p>redis的启动方式</p>
<h5 id="1-直接启动"><a href="#1-直接启动" class="headerlink" title="1.直接启动"></a>1.直接启动</h5><p>进入redis根目录，执行命令: #加上‘&amp;’号使redis以后台程序方式运行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-server &amp;</span><br></pre></td></tr></table></figure>

<h5 id="2-通过指定配置文件启动"><a href="#2-通过指定配置文件启动" class="headerlink" title="2.通过指定配置文件启动"></a>2.通过指定配置文件启动</h5><p>可以为redis服务启动指定配置文件，例如配置为/etc/redis/6379.conf 进入redis根目录，输入命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-server /data//redis/xxx/redis.conf</span><br></pre></td></tr></table></figure>

<p>#如果更改了端口，使用<code>redis-cli</code>客户端连接时，也需要指定端口，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -p 6380 </span><br></pre></td></tr></table></figure>

<h5 id="3-启动指定IP的redis-cli-h-IP地址、-p-端口、-a-密码"><a href="#3-启动指定IP的redis-cli-h-IP地址、-p-端口、-a-密码" class="headerlink" title="3.启动指定IP的redis-cli(-h IP地址、-p 端口、-a 密码)"></a>3.启动指定IP的redis-cli(-h IP地址、-p 端口、-a 密码)</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -h 127.0.0.1 -p 6379 -a 12345</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">redis-cli  -p 6379 -a NBD</span><br></pre></td></tr></table></figure>

<h5 id="4-停止执行命令"><a href="#4-停止执行命令" class="headerlink" title="4.停止执行命令:"></a>4.停止执行命令:</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -p 7068 shutdown -a testmaster123</span><br><span class="line">redis-cli -p 7000  -a NBD shutdown</span><br><span class="line"><span class="meta">#</span><span class="bash">哨兵</span></span><br><span class="line">redis-cli -p 26379  -a testmaster123 shutdown</span><br></pre></td></tr></table></figure>

<h5 id="5-redis集群删除"><a href="#5-redis集群删除" class="headerlink" title="5.redis集群删除"></a>5.redis集群删除</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">pid_name=&quot;redis&quot;</span><br><span class="line">echo &quot;杀死的进程名称：&quot; $pid_name</span><br><span class="line"> </span><br><span class="line">pid=$(ps -efgrep $pid_namegrep -v grepawk &#x27;&#123;print $2&#125;&#x27;)</span><br><span class="line"> </span><br><span class="line">echo &quot;pid列表：&quot; $pid</span><br><span class="line"> </span><br><span class="line">for item in $pid</span><br><span class="line">do</span><br><span class="line">  echo &quot;杀死进程pid=&quot; $item</span><br><span class="line">  kill -9 $item</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>参考： <a target="_blank" rel="noopener" href="https://redis.io/documentation">https://redis.io/documentation</a> <a target="_blank" rel="noopener" href="https://blog.csdn.net/aloneno/article/details/96370167">https://blog.csdn.net/aloneno/article/details/96370167</a> <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_33996921/article/details/105462595">https://blog.csdn.net/qq_33996921/article/details/105462595</a> <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_35887546/article/details/104799272">https://blog.csdn.net/qq_35887546/article/details/104799272</a></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="reward-container">
  <div>只想买包辣条</div>
  <button onclick="document.querySelector('.post-reward').classList.toggle('active');">
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/weixin.png" alt="郭良俊只狗 微信">
        <span>微信</span>
      </div>
      <div>
        <img src="/images/zhifubao.png" alt="郭良俊只狗 支付宝">
        <span>支付宝</span>
      </div>

  </div>
</div>

          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>郭良俊只狗
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="http://erbi.me/1688/" title="Redis Cluster集群搭建">http://erbi.me/1688/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-Hans" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/redis/" rel="tag"># redis</a>
              <a href="/tags/Redis-Cluster/" rel="tag"># Redis Cluster</a>
              <a href="/tags/%E9%9B%86%E7%BE%A4/" rel="tag"># 集群</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/1684/" rel="prev" title="2021.03.18-记一次生产环境的重大事故-删库">
                  <i class="fa fa-chevron-left"></i> 2021.03.18-记一次生产环境的重大事故-删库
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/1671/" rel="next" title="shell-grep">
                  shell-grep <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2012 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">郭良俊只狗</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="/js/third-party/search/local-search.js"></script>






  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
