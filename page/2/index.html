<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css" integrity="sha256-2H3fkXt6FEmrReK448mDVGKb3WW2ZZw35gI7vqHOE4Y=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{&quot;hostname&quot;:&quot;199604.com&quot;,&quot;root&quot;:&quot;&#x2F;&quot;,&quot;images&quot;:&quot;&#x2F;images&quot;,&quot;scheme&quot;:&quot;Gemini&quot;,&quot;version&quot;:&quot;8.5.0&quot;,&quot;exturl&quot;:false,&quot;sidebar&quot;:{&quot;position&quot;:&quot;left&quot;,&quot;display&quot;:&quot;always&quot;,&quot;padding&quot;:18,&quot;offset&quot;:12},&quot;copycode&quot;:false,&quot;bookmark&quot;:{&quot;enable&quot;:false,&quot;color&quot;:&quot;#222&quot;,&quot;save&quot;:&quot;auto&quot;},&quot;fancybox&quot;:false,&quot;mediumzoom&quot;:false,&quot;lazyload&quot;:false,&quot;pangu&quot;:false,&quot;comments&quot;:{&quot;style&quot;:&quot;tabs&quot;,&quot;active&quot;:null,&quot;storage&quot;:true,&quot;lazyload&quot;:false,&quot;nav&quot;:null},&quot;motion&quot;:{&quot;enable&quot;:true,&quot;async&quot;:false,&quot;transition&quot;:{&quot;post_block&quot;:&quot;fadeIn&quot;,&quot;post_header&quot;:&quot;fadeInDown&quot;,&quot;post_body&quot;:&quot;fadeInDown&quot;,&quot;coll_header&quot;:&quot;fadeInLeft&quot;,&quot;sidebar&quot;:&quot;fadeInUp&quot;}},&quot;prism&quot;:false,&quot;i18n&quot;:{&quot;placeholder&quot;:&quot;搜索...&quot;,&quot;empty&quot;:&quot;没有找到任何搜索结果：${query}&quot;,&quot;hits_time&quot;:&quot;找到 ${hits} 个搜索结果（用时 ${time} 毫秒）&quot;,&quot;hits&quot;:&quot;找到 ${hits} 个搜索结果&quot;},&quot;path&quot;:&quot;&#x2F;search.xml&quot;,&quot;localsearch&quot;:{&quot;enable&quot;:true,&quot;trigger&quot;:&quot;auto&quot;,&quot;top_n_per_article&quot;:1,&quot;unescape&quot;:false,&quot;preload&quot;:false}}</script><script src="/js/config.js"></script>
<meta property="og:type" content="website">
<meta property="og:title" content="记忆角落">
<meta property="og:url" content="https://199604.com/page/2/index.html">
<meta property="og:site_name" content="记忆角落">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="郭良俊只狗">
<meta property="article:tag" content="郭良俊,郭良俊只狗,郭小俊,小俊,狗俊,小俊的博客,jiomer,记忆,角落,记忆角落,成长记忆,生活,回忆">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://199604.com/page/2/">



<script class="next-config" data-name="page" type="application/json">{&quot;sidebar&quot;:&quot;&quot;,&quot;isHome&quot;:true,&quot;isPost&quot;:false,&quot;lang&quot;:&quot;zh-CN&quot;,&quot;comments&quot;:&quot;&quot;,&quot;permalink&quot;:&quot;&quot;,&quot;path&quot;:&quot;page&#x2F;2&#x2F;index.html&quot;,&quot;title&quot;:&quot;&quot;}</script>

<script class="next-config" data-name="calendar" type="application/json">&quot;&quot;</script>
<title>记忆角落</title>
  

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?<46c2f95d60e43eb48d99ddf240e9771c>"></script>



  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">记忆角落</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">生活,一半是回忆,一半是继续.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
        <li class="menu-item menu-item-commonweal"><a href="/links/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>邻居</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="郭良俊只狗"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">郭良俊只狗</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">392</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">31</span>
        <span class="site-state-item-name">分类</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">255</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://gitee.com/guoliangjun17" title="Gitee → https:&#x2F;&#x2F;gitee.com&#x2F;guoliangjun17" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:admin@199604.com" title="E-Mail → mailto:admin@199604.com"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/jiomer" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;jiomer" rel="noopener" target="_blank"><i class="fab fa-weibo fa-fw"></i></a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://199604.com/1722/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郭良俊只狗">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="记忆角落">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/1722/" class="post-title-link" itemprop="url">ip地址后边加个/8(16,24,32)含义</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-05-01 10:24:59" itemprop="dateCreated datePublished" datetime="2021-05-01T10:24:59+08:00">2021-05-01</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-06-10 15:14:35" itemprop="dateModified" datetime="2021-06-10T15:14:35+08:00">2021-06-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p># ip地址后边加个/8(16,24,32)含义</p>
<p>是掩码的位数，<br>A类IP地址的默认子网掩码为255.0.0.0（由于255相当于二进制的8位1，所以也缩写成“/8”，表示网络号占了8位）;</p>
<p>B类的为255.255.0.0（/16）;</p>
<p>C类的为255.255.255.0(/24)。</p>
<p>/30就是255.255.255.252。</p>
<p>/32就是255.255.255.255.</p>

          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/1722/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://199604.com/1720/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郭良俊只狗">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="记忆角落">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/1720/" class="post-title-link" itemprop="url">什么是YAML</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-04-26 10:24:43" itemprop="dateCreated datePublished" datetime="2021-04-26T10:24:43+08:00">2021-04-26</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-06-10 09:36:15" itemprop="dateModified" datetime="2021-06-10T09:36:15+08:00">2021-06-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/yaml/" itemprop="url" rel="index"><span itemprop="name">yaml</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>YAML是”YAML Ain’t a Markup Language”（YAML不是一种标记语言）的递归缩写。YAML的意思其实是：“Yet Another Markup Language”（仍是一种标记语言）。主要强度这种语音是以数据为中心，而不是以标记语音为重心，例如像xml语言就会使用大量的标记。 YAML是一个可读性高，易于理解，用来表达数据序列化的格式。它的语法和其他高级语言类似，并且可以简单表达清单（数组）、散列表，标量等数据形态。它使用空白符号缩进和大量依赖外观的特色，特别适合用来表达或编辑数据结构、各种配置文件等。 YAML的配置文件后缀为 .yml，例如Springboot项目中使用到的配置文件 application.yml 。</p>
<h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><ul>
<li>  YAML使用可打印的Unicode字符，可使用UTF-8或UTF-16。</li>
<li>  数据结构采用键值对的形式，即 键名称: 值，注意冒号后面要有空格。</li>
<li>  每个清单（数组）成员以单行表示，并用短杠+空白（- ）起始。或使用方括号（[]），并用逗号+空白（, ）分开成员。</li>
<li>  每个散列表的成员用冒号+空白（: ）分开键值和内容。或使用大括号（{ }），并用逗号+空白（, ）分开。</li>
<li>  字符串值一般不使用引号，必要时可使用，使用双引号表示字符串时，会转义字符串中的特殊字符（例如\n）。使用单引号时不会转义字符串中的特殊字符。</li>
<li>  大小写敏感</li>
<li>  使用缩进表示层级关系，缩进不允许使用tab，只允许空格，因为有可能在不同系统下tab长度不一样</li>
<li>  缩进的空格数可以任意，只要相同层级的元素左对齐即可</li>
<li>  在单一文件中，可用连续三个连字号（—）区分多个文件。还有选择性的连续三个点号（…）用来表示文件结尾。</li>
<li>  ‘#’表示注释，可以出现在一行中的任何位置，单行注释</li>
<li>  在使用逗号及冒号时，后面都必须接一个空白字符，所以可以在字符串或数值中自由加入分隔符号（例如：1,5,280或<a href="http://199604.com/">http://199604.com</a>）而不需要使用引号。</li>
</ul>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><ul>
<li>  纯量（标量）（scalars）：单个的、不可再分的值</li>
<li>  对象：键值对的集合，又称为映射（mapping）/ 哈希（hashes） / 字典（dictionary）</li>
<li>  数组：一组按次序排列的值，又称为序列（sequence） / 列表（list）</li>
</ul>
<h3 id="标量"><a href="#标量" class="headerlink" title="标量"></a>标量</h3><p>标量是最基础的数据类型，不可再分的值，他们一般用于表示单个的变量，有以下七种：</p>
<ul>
<li>  字符串</li>
<li>  布尔值</li>
<li>  整数</li>
<li>  浮点数</li>
<li>  Null</li>
<li>  时间</li>
<li>  日期</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 字符串</span></span><br><span class="line"><span class="attr">string.value:</span> <span class="string">Hello!您好呀!</span></span><br><span class="line"><span class="comment"># 布尔值，true或false</span></span><br><span class="line"><span class="attr">boolean.value:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">boolean.value1:</span> <span class="literal">false</span></span><br><span class="line"><span class="comment"># 整数</span></span><br><span class="line"><span class="attr">int.value:</span> <span class="number">10</span></span><br><span class="line"><span class="attr">int.value1:</span> <span class="string">0b1010_0111_0100_1010_1110</span> <span class="comment"># 二进制</span></span><br><span class="line"><span class="comment"># 浮点数</span></span><br><span class="line"><span class="attr">float.value:</span> <span class="number">3.14159</span></span><br><span class="line"><span class="attr">float.value1:</span> <span class="number">314159e-5</span> <span class="comment"># 科学计数法</span></span><br><span class="line"><span class="comment"># Null，~代表null</span></span><br><span class="line"><span class="attr">null.value:</span> <span class="string">~</span></span><br><span class="line"><span class="comment"># 时间，时间使用ISO 8601格式，时间和日期之间使用T连接，最后使用+代表时区</span></span><br><span class="line"><span class="attr">datetime.value:</span> <span class="type">!!timestamp</span> <span class="number">2021-04-13T10:31:00+08:00</span></span><br><span class="line"><span class="comment"># 日期,日期必须使用ISO 8601格式，即yyyy-MM-dd</span></span><br><span class="line"><span class="attr">date.value:</span> <span class="type">!!timestamp</span> <span class="number">2021-04-13</span></span><br></pre></td></tr></table></figure>

<p>这样，我们就可以在程序中引入了，如下：</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/1720/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://199604.com/1718/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郭良俊只狗">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="记忆角落">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/1718/" class="post-title-link" itemprop="url">GreenPlum维护年龄的处理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-04-22 23:09:59" itemprop="dateCreated datePublished" datetime="2021-04-22T23:09:59+08:00">2021-04-22</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-06-10 09:36:15" itemprop="dateModified" datetime="2021-06-10T09:36:15+08:00">2021-06-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/GreenPlum/" itemprop="url" rel="index"><span itemprop="name">GreenPlum</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/postgresql/" itemprop="url" rel="index"><span itemprop="name">postgresql</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>最常见的方法是通过此消息，警告您正在进行事务处理： WARNING: database “lte_mr” must be vacuumed within 113330803 transactions，如下图疯狂出现： <img src="http://qn.199604.com/typoraImg/image-20210422225724569.png" alt="image-20210422225724569"> 或者更糟糕的是，以下消息表明您已经完成了 <strong>transaction wraparound</strong></p>
<h5 id="处理方法："><a href="#处理方法：" class="headerlink" title="处理方法："></a>处理方法：</h5><p>在适当的数据库上执行建议的VACUUM; 这里我们使用默认数据库<code>lte_mr</code>，因此用适当的数据库名称替换该名称。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">psql <span class="operator">-</span>d lte_mr <span class="operator">-</span>c &quot;vacuum freeze&quot;</span><br></pre></td></tr></table></figure>

<p>当表的年龄大于autovacuum_freeze_max_age时（默认是2亿），autovacuum进程会自动对表进行freeze。</p>
<h5 id="–查询库xid"><a href="#–查询库xid" class="headerlink" title="–查询库xid"></a>–查询库xid</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> datname, age(datfrozenxid) <span class="keyword">FROM</span> pg_database;</span><br></pre></td></tr></table></figure>

<h5 id="查询每个表的xid使用程度："><a href="#查询每个表的xid使用程度：" class="headerlink" title="查询每个表的xid使用程度："></a>查询每个表的xid使用程度：</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> relname, age(relfrozenxid) <span class="keyword">as</span> xid_age, pg_size_pretty(pg_relation_size(oid)) <span class="keyword">as</span> table_size </span><br><span class="line"><span class="keyword">FROM</span> pg_class <span class="keyword">WHERE</span> relkind <span class="operator">=</span> <span class="string">&#x27;r&#x27;</span> <span class="keyword">and</span> pg_relation_size(oid) <span class="operator">&gt;</span> <span class="number">1073741824</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> age(relfrozenxid) <span class="keyword">DESC</span> LIMIT <span class="number">20</span>;</span><br></pre></td></tr></table></figure>

<p>建议使用vacuum freeze [ table_name ] 来对指定的表进行xid 冻结清理,因为整个库的话基本上时间无法确认</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/1718/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://199604.com/1715/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郭良俊只狗">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="记忆角落">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/1715/" class="post-title-link" itemprop="url">Golang格式化时间yyyy-MM-dd</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-04-20 23:10:22" itemprop="dateCreated datePublished" datetime="2021-04-20T23:10:22+08:00">2021-04-20</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-06-10 09:36:15" itemprop="dateModified" datetime="2021-06-10T09:36:15+08:00">2021-06-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Golang/" itemprop="url" rel="index"><span itemprop="name">Golang</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><code>Golang</code>中并没有按照<code>yyyyMMdd</code>这样的格式，而是按照<code>2006-01-02 15:04:05</code>这个固定来格式化，分隔符可自定义。</p>
<ul>
<li>  <code>20060102</code>：得到的是<code>yyyyMMdd</code>。</li>
<li>  <code>2006/01/02 15:04</code>：得到的是<code>yyyy/MM/dd HH:mm</code></li>
<li>  <code>2006年01月02日 15点04分05秒</code>：得到的是<code>yyyy年MM月dd日 HH点mm分SS秒</code></li>
</ul>
<h2 id="解析"><a href="#解析" class="headerlink" title="解析"></a>解析</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">format :=<span class="string">&quot;2006-01-02 15:04:05&quot;</span></span><br><span class="line">parseTime, err := time.Parse(format,<span class="string">&quot;2021-04-15 16:38:01&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line"><span class="built_in">panic</span>(err)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(parseTime)</span><br></pre></td></tr></table></figure>

<h2 id="格式化"><a href="#格式化" class="headerlink" title="格式化"></a>格式化</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">now:=time.Now()</span><br><span class="line">fmt.Println(now)</span><br><span class="line">fmt.Printf(<span class="string">&quot;current time:%v\n&quot;</span>, now)</span><br><span class="line"></span><br><span class="line">year := now.Year()     <span class="comment">//年</span></span><br><span class="line">month := <span class="keyword">int</span>(now.Month())<span class="comment">//月</span></span><br><span class="line">day := now.Day()       <span class="comment">//日</span></span><br><span class="line">hour := now.Hour()     <span class="comment">//小时</span></span><br><span class="line">minute := now.Minute() <span class="comment">//分钟</span></span><br><span class="line">second := now.Second() <span class="comment">//秒</span></span><br><span class="line"></span><br><span class="line">timestamp1:=now.Unix()</span><br><span class="line">fmt.Println(year,month,day,hour,minute,second,timestamp1)</span><br><span class="line"></span><br><span class="line">layout := <span class="string">&quot;01&quot;</span></span><br><span class="line"></span><br><span class="line">formatTime := time.Now().Format(layout)</span><br><span class="line">fmt.Println(<span class="string">&quot;string: &quot;</span>, formatTime)</span><br><span class="line"></span><br><span class="line">layout1 := <span class="string">&quot;20060102150405&quot;</span></span><br><span class="line"></span><br><span class="line">formatTime1 := time.Now().Format(layout1)</span><br><span class="line">fmt.Println(<span class="string">&quot;string: &quot;</span>, formatTime1)</span><br></pre></td></tr></table></figure>

<h2 id="由来"><a href="#由来" class="headerlink" title="由来"></a>由来</h2><p><code>2006</code>为<code>Golang</code>诞生时间，<code>15</code>是下午<code>3</code>点。 帮助记忆的方法：<code>1</code>月<code>2</code>日<code>3</code>点<code>4</code>分<code>5</code>秒，<code>2006</code>年，<code>-7</code>时区，正好是<code>1234567</code>。</p>

          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/1715/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://199604.com/1710/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郭良俊只狗">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="记忆角落">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/1710/" class="post-title-link" itemprop="url">OpenSSL升级后导致libcrypt.so.10和libssl.so.10找不到的解决</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-04-15 10:24:49" itemprop="dateCreated datePublished" datetime="2021-04-15T10:24:49+08:00">2021-04-15</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-06-10 09:36:15" itemprop="dateModified" datetime="2021-06-10T09:36:15+08:00">2021-06-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h3 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h3><p>机器因为安全需要，对OpenSSL进行了升级，通过openssl version可以查看版本为1.1，执行curl提示libcrypto.so.10库不匹配。</p>
<h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><p>OpenSSL是Linux的基础库，升级会带来不少问题，比如：weg, curl提示找不到libcrypt.so.10和libssl.so.10库</p>
<h3 id="通过资料分析："><a href="#通过资料分析：" class="headerlink" title="通过资料分析："></a>通过资料分析：</h3><p>这个问题就是因为升级OpenSSL导致的，新版本的SSL把1.1版本的库替换了老的1.0库，导致老的程序不兼容。因此需要让老程序也可以继续工作，不至于全部升级一遍。</p>
<h3 id="解决办法："><a href="#解决办法：" class="headerlink" title="解决办法："></a>解决办法：</h3><p>从本机或者其他机器上找到libcrypt.so.1.0和libssl.so.1.0文件，复制到问题机器的/lib64目录，在创建1.0版本的符号链接。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 在具有正常1.0版本的同版本机器：</span></span><br><span class="line">scp libcrypto.so.1.0.2k &lt;目标机器&gt;/lib64/</span><br><span class="line">scp libssl.so.1.0.2k &lt;目标机器&gt;/lib64/</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 在问题机器上恢复链接</span></span><br><span class="line">cd /lib64/</span><br><span class="line">ls -l libcrypto.*</span><br><span class="line">ln -sf libssl.so.1.0.2k libssl.so.10</span><br><span class="line">ln -sf libcrypto.so.1.0.2k libcrypto.so.10</span><br></pre></td></tr></table></figure>

<p>通过ldd /usr/bin/curl 可以看到程序链接的位置，在通过符号链接来解决。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/1710/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://199604.com/1704/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郭良俊只狗">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="记忆角落">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/1704/" class="post-title-link" itemprop="url">python批量爬取域名备案</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-04-10 10:24:56" itemprop="dateCreated datePublished" datetime="2021-04-10T10:24:56+08:00">2021-04-10</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-06-10 15:18:12" itemprop="dateModified" datetime="2021-06-10T15:18:12+08:00">2021-06-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/pyhton/" itemprop="url" rel="index"><span itemprop="name">pyhton</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>python批量爬取域名备案小工具–接口是站长之家</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">import re, requests, time, xlrd, random, csv</span><br><span class="line">from lxml import etree</span><br><span class="line"></span><br><span class="line">domain_list = []</span><br><span class="line"># workbook = xlrd.open_workbook(&#x27;未爬.xls&#x27;)</span><br><span class="line"># sheet0 = workbook.sheet_by_index(0)</span><br><span class="line"># cols = sheet0.col_slice(0,1)</span><br><span class="line"># for col in cols:</span><br><span class="line">#     domain_list.append(col.value)</span><br><span class="line"></span><br><span class="line">with open(&#x27;111.txt&#x27;,encoding=&#x27;utf-8&#x27;,newline=&#x27;&#x27;)as fk:</span><br><span class="line">    for i in fk:</span><br><span class="line">        domain = re.sub(r&#x27;\r\n$&#x27;,&#x27;&#x27;,i)</span><br><span class="line">        domain_list.append(domain)</span><br><span class="line"></span><br><span class="line">user_Agent_list = [</span><br><span class="line">    &quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.102 Safari/537.36&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (Windows NT 10.0; WOW64; rv:6.0) Gecko/20100101 Firefox/6.0&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/534.50 (KHTML, like Gecko) Version/5.1 Safari/534.50&quot;,</span><br><span class="line">    &quot;Opera/9.80 (Windows NT 10.0; U; zh-cn) Presto/2.9.168 Version/11.50&quot;,</span><br><span class="line">    &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/87.0.4280.66 Safari/537.36&quot;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">a = 0</span><br><span class="line">url = &#x27;http://icp.chinaz.com/searchs&#x27;</span><br><span class="line">with open(&#x27;test1.csv&#x27;,&#x27;a&#x27;,newline=&#x27;&#x27;)as fk:</span><br><span class="line">    writer = csv.writer(fk)</span><br><span class="line">    csv_header = [&#x27;域名&#x27;,&#x27;主办单位名称&#x27;,&#x27;单位性质&#x27;,&#x27;网站备案/许可证号&#x27;,&#x27;网站名称&#x27;,&#x27;审核时间&#x27;]</span><br><span class="line">    writer.writerow(csv_header)</span><br><span class="line">    for num in range(len(domain_list)//20-a//20+1):</span><br><span class="line">        local_time = int(time.time())</span><br><span class="line">        Cookie = &#x27;UM_distinctid=176dabed56b80a-080978cc77e73-376b4502-1fa400-176dabed56c952; __guid=31546918.3636803744203470000.1610026817897.5715; __gads=ID=2c6886bd82b7280d-2280524a92c500e4:T=1610026898:RT=1610026898:S=ALNI_MbyH5W7HulKDaCwCpZdoBvNfCv5fg; toolbox_urls=www.ccbechina.cn|www.apple.iducs.cn; qHistory=aHR0cDovL3dob2lzLmNoaW5hei5jb20vK1dob2lz5p+l6K+ifGh0dHA6Ly90b29sLmNoaW5hei5jb21f56uZ6ZW/5bel5YW3fGh0dHA6Ly9yYW5rLmNoaW5hei5jb20vcmFua2FsbC9f5p2D6YeN57u85ZCI5p+l6K+ifGh0dHA6Ly9zZW8uY2hpbmF6LmNvbV9TRU/nu7zlkIjmn6Xor6J8aHR0cDovL3Rvb2wuY2hpbmF6LmNvbS9kbnMvX0Ruc+afpeivog==; Hm_lvt_aecc9715b0f5d5f7f34fba48a3c511d6=1614822213,1614822577,1614822679,1614823108; CNZZDATA5082706=cnzz_eid%3D817694234-1610023182-%26ntime%3D1615443601; Hm_lvt_ca96c3507ee04e182fb6d097cb2a1a4c=1614158602,1614757255,1615271947,1615445490; .AspNetCore.Antiforgery.-Z5WMyCX4K0=CfDJ8GYV1qq4FPhNvMPl1WmHHp4TJ3UkqvXhcEpr97APD9DsO6WWhvHhS1Ur7lynrac2voNvP_6CKjUNJ7GfxR0Y8Hvzh5CzvnqGj1zDfZqI-uOal1z6njEfqbHpCtZTRIzvCbnZaH2ylkWKvQ8HYwdptNY; bbsmax_user=a3edcb67-4488-4058-ac01-ec29ef25c2d3; avatarId=14f364b2-af95-4174-a58f-b95415e9ad1c-; .AspNetCore.Session=CfDJ8GYV1qq4FPhNvMPl1WmHHp7xuHiscEHg0wvC5lfyLapGtl8WJLhWLk%2BrvYNFAM9CCKxQ6RnvIiEgR86UrCH%2FavX838WgaU%2BU%2FbXLz305a97b8qWufBUMzpsSVhMKMMBzfgT%2F9LSOKw1wTwgn9ND7ySHWDWbXg%2BXyPKaPVWG7dFdm; monitor_count=4; Hm_lpvt_ca96c3507ee04e182fb6d097cb2a1a4c=&#123;0&#125;&#x27;.format(local_time)</span><br><span class="line">        headers = &#123;</span><br><span class="line">            &#x27;User-Agent&#x27;: random.choice(user_Agent_list),</span><br><span class="line">            &#x27;Cookie&#x27;:Cookie,</span><br><span class="line">            &#x27;Host&#x27;:&#x27;icp.chinaz.com&#x27;,</span><br><span class="line">            &#x27;Referer&#x27;:&#x27;http://icp.chinaz.com/web&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">        form_data = &#123;</span><br><span class="line">            &#x27;hosts&#x27;:&#x27;,&#x27;.join(domain_list[a:a+20])</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        res = requests.post(url,headers=headers,data=form_data)</span><br><span class="line">        # print(res.content.decode(&#x27;utf-8&#x27;))</span><br><span class="line">        html = etree.HTML(res.content.decode(&#x27;utf-8&#x27;))</span><br><span class="line">        trs = html.xpath(&#x27;//tbody[@id=&quot;result_table&quot;]/tr&#x27;)</span><br><span class="line">        for tr in trs:</span><br><span class="line">            domain = tr.xpath(&#x27;./td[1]//text()&#x27;)[0]</span><br><span class="line">            organizer = tr.xpath(&#x27;./td[2]//text()&#x27;)[0]</span><br><span class="line">            unit_nature = tr.xpath(&#x27;./td[3]//text()&#x27;)[0]</span><br><span class="line">            passcord = tr.xpath(&#x27;./td[4]//text()&#x27;)[0]</span><br><span class="line">            website_name = tr.xpath(&#x27;./td[5]//text()&#x27;)[0]</span><br><span class="line">            audit_time = tr.xpath(&#x27;./td[8]//text()&#x27;)[0]</span><br><span class="line">            csv_content = [domain,organizer,unit_nature,passcord,website_name,audit_time]</span><br><span class="line">            print(csv_content)</span><br><span class="line">            writer.writerow(csv_content)</span><br><span class="line">        a += 20</span><br><span class="line">        time.sleep(1)</span><br><span class="line">        print(&#x27;现在是第%s个&#x27;% a)</span><br><span class="line">        # print(form_data)</span><br></pre></td></tr></table></figure>


          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/1704/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://199604.com/1707/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郭良俊只狗">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="记忆角落">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/1707/" class="post-title-link" itemprop="url">MyBatis-Plus使用技巧</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-04-05 23:01:59" itemprop="dateCreated datePublished" datetime="2021-04-05T23:01:59+08:00">2021-04-05</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-06-10 09:36:15" itemprop="dateModified" datetime="2021-06-10T09:36:15+08:00">2021-06-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">学习</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/JAVA%E4%BB%A3%E7%A0%81/" itemprop="url" rel="index"><span itemprop="name">JAVA代码</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><strong>最近在用 Mybatis-Plus，嗯，是真他妈香！！！今天就来说说 Mybatis-Plus 的那些使用技巧</strong></p>
<h4 id="创建user表"><a href="#创建user表" class="headerlink" title="创建user表"></a>创建user表</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> <span class="keyword">user</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">user</span></span><br><span class="line">(</span><br><span class="line">id <span class="type">BIGINT</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;主键ID&#x27;</span>,</span><br><span class="line">name <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">age <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;年龄&#x27;</span>,</span><br><span class="line">email <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;邮箱&#x27;</span>,</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY (id)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">user</span> (id, name, age, email) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>, <span class="string">&#x27;glj1&#x27;</span>, <span class="number">18</span>, <span class="string">&#x27;test1@199604.com&#x27;</span>),</span><br><span class="line">(<span class="number">2</span>, <span class="string">&#x27;glj1&#x27;</span>, <span class="number">20</span>, <span class="string">&#x27;test2@199604.com&#x27;</span>),</span><br><span class="line">(<span class="number">3</span>, <span class="string">&#x27;glj1&#x27;</span>, <span class="number">28</span>, <span class="string">&#x27;test3@199604.com&#x27;</span>),</span><br><span class="line">(<span class="number">4</span>, <span class="string">&#x27;glj1&#x27;</span>, <span class="number">21</span>, <span class="string">&#x27;test4@199604.com&#x27;</span>),</span><br><span class="line">(<span class="number">5</span>, <span class="string">&#x27;glj1&#x27;</span>, <span class="number">24</span>, <span class="string">&#x27;test5@199604.com&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>注意：– 真实开发中往往都会有这四个字段，version（乐观锁）、deleted（逻辑删除）、gmt_create（创建时间）、gmt_modified（修改时间）</p>
<h4 id="导入依赖"><a href="#导入依赖" class="headerlink" title="导入依赖"></a><strong>导入依赖</strong></h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 数据库驱动 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- lombok --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- mybatis-plus --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- mybatis-plus 是自己开发，并非官方的！--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="创建application-yml"><a href="#创建application-yml" class="headerlink" title="创建application.yml"></a><strong>创建application.yml</strong></h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://127.0.0.1:3306/txds?useUnicode=true&amp;characterEncoding=UTF-8&amp;zeroDateTimeBehavior=convertToNull&amp;allowMultiQueries=true&amp;useSSL=false</span></span><br><span class="line"><span class="comment">#    driver-class-name: com.mysql.jdbc.Driver</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br></pre></td></tr></table></figure>

<h4 id="业务代码"><a href="#业务代码" class="headerlink" title="业务代码"></a><strong>业务代码</strong></h4><h5 id="实体类"><a href="#实体类" class="headerlink" title="实体类"></a>实体类</h5>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/1707/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://199604.com/1702/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郭良俊只狗">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="记忆角落">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/1702/" class="post-title-link" itemprop="url">Centos迁移MySql目录</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-04-04 10:24:24" itemprop="dateCreated datePublished" datetime="2021-04-04T10:24:24+08:00">2021-04-04</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-06-10 15:10:49" itemprop="dateModified" datetime="2021-06-10T15:10:49+08:00">2021-06-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/mysql/" itemprop="url" rel="index"><span itemprop="name">mysql</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>因为测试环境mysql是使用yum安装的，默认目录是在/var/lib/mysql下，而/var归属/盘 只有50G，空间满后mysql就GG了，网上迁移mysql的教程大多是转移目录，修改配置文件，这种方法会因为系统版本、mysql版本差异导致各种启动不了.</p>
<p>下面先避免这些问题，我直接用软链迁移</p>
<h5 id="1-停止mysql（千万不要用kill）"><a href="#1-停止mysql（千万不要用kill）" class="headerlink" title="1.停止mysql（千万不要用kill）"></a>1.停止mysql（千万不要用kill）</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">service mysql status #先看mysql运行状态，如果运行进行stop</span><br><span class="line">service mysql stop</span><br><span class="line">ps -efgrep mysqld  #查看进程是否完全停止，一定要等正常停止后再迁移，千万不要kill关闭mysql</span><br></pre></td></tr></table></figure>

<h5 id="2-迁移mysql目录，设置软连接"><a href="#2-迁移mysql目录，设置软连接" class="headerlink" title="2.迁移mysql目录，设置软连接"></a>2.迁移mysql目录，设置软连接</h5><p>记得看一下迁移前的权限和迁移后的目录权限是否正确，如果权限不一致mysql也会启动不了 若不一致执行：chown -R mysql:mysql /data/mysql_data/mysql</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mv /var/lib/mysql /data/mysql_data/</span><br><span class="line"></span><br><span class="line">ln -s /data/mysql_data/mysql /var/lib/mysql #设置软连接</span><br></pre></td></tr></table></figure>

<h5 id="3-重新启动mysql"><a href="#3-重新启动mysql" class="headerlink" title="3.重新启动mysql"></a>3.重新启动mysql</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service mysql start</span><br></pre></td></tr></table></figure>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/1702/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://199604.com/1694/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郭良俊只狗">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="记忆角落">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/1694/" class="post-title-link" itemprop="url">Lombok的基本使用</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-04-01 10:24:38" itemprop="dateCreated datePublished" datetime="2021-04-01T10:24:38+08:00">2021-04-01</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-06-10 15:16:09" itemprop="dateModified" datetime="2021-06-10T15:16:09+08:00">2021-06-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="1-Lombok的使用非常简单："><a href="#1-Lombok的使用非常简单：" class="headerlink" title="1.Lombok的使用非常简单："></a>1.Lombok的使用非常简单：</h2><h3 id="Lombok-plugin-插件"><a href="#Lombok-plugin-插件" class="headerlink" title="Lombok plugin 插件"></a>Lombok plugin 插件</h3><p>Intellij idea 使用Lombok需要安装插件：Lombok plugin: Preferences —&gt; Plugins —&gt; 搜索 Lombok plugin — &gt; Install</p>
<h3 id="引入相应的maven包"><a href="#引入相应的maven包" class="headerlink" title="引入相应的maven包"></a>引入相应的maven包</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- lombok --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="Lombok注解的使用"><a href="#Lombok注解的使用" class="headerlink" title="Lombok注解的使用"></a>Lombok注解的使用</h3><h4 id="POJO类常用注解"><a href="#POJO类常用注解" class="headerlink" title="POJO类常用注解:"></a>POJO类常用注解:</h4><p><strong>@Getter/@Setter: 作用类上，生成所有成员变量的getter/setter方法；作用于成员变量上，生成该成员变量的getter/setter方法。可以设定访问权限及是否懒加载等。</strong></p>
<p><strong>@ToString：作用于类，覆盖默认的toString()方法，可以通过of属性限定显示某些字段，通过exclude属性排除某些字段。</strong></p>
<p><strong>@EqualsAndHashCode：作用于类，覆盖默认的equals和hashCode</strong></p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/1694/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://199604.com/1700/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="郭良俊只狗">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="记忆角落">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/1700/" class="post-title-link" itemprop="url">域名报红检测小工具-python</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-03-31 10:29:11" itemprop="dateCreated datePublished" datetime="2021-03-31T10:29:11+08:00">2021-03-31</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2021-06-10 15:24:57" itemprop="dateModified" datetime="2021-06-10T15:24:57+08:00">2021-06-10</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/pyhton/" itemprop="url" rel="index"><span itemprop="name">pyhton</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>域名爆红检测小工具,方便做识别批量检查，作为另一种思路</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">#!/usr/bin/env python3</span><br><span class="line"># _*_ coding:utf-8 _*_</span><br><span class="line"></span><br><span class="line">import json</span><br><span class="line">import time</span><br><span class="line">import requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def check_file(file):</span><br><span class="line">    str_dump = []</span><br><span class="line">    line_len = 100</span><br><span class="line">    with open(file, &#x27;r&#x27;) as f1:</span><br><span class="line">        for line in f1:</span><br><span class="line">            line = line.replace(&#x27;\n&#x27;, &#x27;&#x27;)</span><br><span class="line">            print(line)</span><br><span class="line">            # link = &#x27;https://cgi.urlsec.qq.com/index.php?m=check&amp;a=check&amp;url=http://&#123;&#125;&#x27;.format(line)</span><br><span class="line">            t = int(round(time.time()*1000))</span><br><span class="line">            link = &#x27;https://cgi.urlsec.qq.com/index.php?m=check&amp;a=check&amp;callback=jQuery1113049533065324068226_1585819829729&amp;url=&#123;0&#125;&amp;_=&#123;1&#125;&#x27;.format(line, t)</span><br><span class="line">            try:</span><br><span class="line">                # 接口header</span><br><span class="line">                headers = &#123;</span><br><span class="line">                    &quot;Content-Type&quot;: &quot;application/json;charset=utf-8&quot;,</span><br><span class="line">                    &quot;Accept&quot;: &quot;*/*&quot;,</span><br><span class="line">                    &quot;Connection&quot;: &quot;keep-alive&quot;,</span><br><span class="line">                    &quot;Host&quot;: &quot;cgi.urlsec.qq.com&quot;,</span><br><span class="line">                    # &quot;Referer&quot;: &quot;https://guanjia.qq.com&quot;,</span><br><span class="line">                    &quot;Referer&quot;: &quot;https://urlsec.qq.com/check.html?url=&#123;&#125;&quot;.format(line),</span><br><span class="line">                    &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.182 Safari/537.36 Edg/88.0.705.74&quot;,</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                req = requests.get(link, headers=headers, timeout=100)</span><br><span class="line">                # print(req)</span><br><span class="line">                response = req.text</span><br><span class="line">                # print(response[len(&#x27;jQuery1113049533065324068226_1585819829729(&#x27;):len(response)-1])</span><br><span class="line">                data = json.loads(response[len(&#x27;jQuery1113049533065324068226_1585819829729(&#x27;):len(response)-1])</span><br><span class="line"></span><br><span class="line">                # whitetype: 1：安全性未知 2：危险网站 3：安全网站</span><br><span class="line">                white_type = data[&#x27;data&#x27;][&#x27;results&#x27;][&#x27;whitetype&#x27;]</span><br><span class="line">                # python 没switch 语法 害</span><br><span class="line">                if white_type == 1:</span><br><span class="line">                    type_str = &#x27;unknown&#x27;</span><br><span class="line">                elif white_type == 2:</span><br><span class="line">                    type_str = &#x27;danger&#x27;</span><br><span class="line">                elif white_type == 3:</span><br><span class="line">                    type_str = &#x27;safe&#x27;</span><br><span class="line">                else:</span><br><span class="line">                    type_str = &#x27;null&#x27;</span><br><span class="line"></span><br><span class="line">                str_data = line + &#x27;,&#x27; + type_str + &#x27;,&#x27; + str(white_type) + &#x27;\n&#x27;</span><br><span class="line">                str_dump.append(str_data)</span><br><span class="line">                req.close()</span><br><span class="line"></span><br><span class="line">            except Exception as e:</span><br><span class="line">                print(e)</span><br><span class="line"></span><br><span class="line">            if len(str_dump) &gt; 0:</span><br><span class="line">                if (len(str_dump) % line_len) == 0:</span><br><span class="line">                    # print(&#x27;够&#123;&#125;条啦...&#x27;.format(len(str_dump)))</span><br><span class="line">                    with open(&#x27;target_qq.txt&#x27;, &#x27;a+&#x27;) as f3:</span><br><span class="line">                        f3.write(&#x27;&#x27;.join(str_dump))</span><br><span class="line">                        str_dump = []</span><br><span class="line"></span><br><span class="line">            time.sleep(0.1)</span><br><span class="line"></span><br><span class="line">    if len(str_dump) &gt; 0:</span><br><span class="line">        with open(&#x27;target_qq.txt&#x27;, &#x27;a+&#x27;) as f3:</span><br><span class="line">            f3.write(&#x27;&#x27;.join(str_dump))</span><br><span class="line">            str_dump = []</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">if __name__ == &#x27;__main__&#x27;:</span><br><span class="line">    check_file(&#x27;url.txt&#x27;)</span><br></pre></td></tr></table></figure>


          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/1700/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/40/">40</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2012 – 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">郭良俊只狗</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="/js/third-party/search/local-search.js"></script>






  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
